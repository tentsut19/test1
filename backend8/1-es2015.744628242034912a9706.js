/*! For license information please see 1-es2015.744628242034912a9706.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3E0/":function(t,e,n){"use strict";var i=n("D0XW"),r=n("7o/Q"),s=n("WMd4");function a(t,e=i.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new o(r,e))}n.d(e,"a",(function(){return a}));class o{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new l(t,this.delay,this.scheduler))}}class l extends r.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,i=t.scheduler,r=t.destination;for(;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){const e=Math.max(0,n[0].time-i.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(l.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new u(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(s.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(s.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.time=t,this.notification=e}}},"3KC0":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n("YeHE"),n("bfU7"),n("K81y"),n("meT2"),n("3yoT");var i=function(){return function(){}}()},"3yoT":function(t,e,n){"use strict";n("SF+E"),n("ISLE"),n("curK")},"5yfJ":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));var i=n("HDdC"),r=n("KqfI");const s=new i.a(r.a);function a(){return s}},"8Z0m":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n("mrSG"),n("8Y7J"),n("z6cu"),n("LRne"),n("lJxs"),n("JIr8");class i{static forRoot(){return{ngModule:i,providers:[]}}}},"9AJC":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return M})),n.d(e,"c",(function(){return J})),n.d(e,"d",(function(){return it})),n.d(e,"e",(function(){return ct})),n.d(e,"f",(function(){return bt})),n.d(e,"g",(function(){return kt}));var i=n("8Y7J"),r=n("G0yt"),s=n("SVse"),a=n("s7LF"),o=i["\u0275crt"]({encapsulation:2,styles:["ngb-alert{display:block}"],data:{}});function l(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.closeHandler()&&i),i}),null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\xd7"]))],null,null)}function u(t){return i["\u0275vid"](2,[i["\u0275ncd"](null,0),(t()(),i["\u0275and"](16777216,null,null,1,null,l)),i["\u0275did"](2,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,2,0,e.component.dismissible)}),null)}function c(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-alert",[["class","alert"],["role","alert"]],[[2,"alert-dismissible",null]],null,null,u,o)),i["\u0275did"](1,638976,null,0,r.d,[r.e,i.Renderer2,i.ElementRef],null,null)],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,i["\u0275nov"](e,1).dismissible)}))}var h=i["\u0275ccf"]("ngb-alert",r.d,c,{dismissible:"dismissible",type:"type"},{close:"close"},["*"]),d=i["\u0275crt"]({encapsulation:2,styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:0 0}[ngbDatepickerDayView].outside{opacity:.5}"],data:{}});function f(t){return i["\u0275vid"](2,[(t()(),i["\u0275ted"](0,null,["",""]))],null,(function(t,e){var n=e.component;t(e,0,0,n.i18n.getDayNumerals(n.date))}))}var p=i["\u0275crt"]({encapsulation:2,styles:["ngb-datepicker-navigation{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.right .ngb-dp-navigation-chevron{-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{-ms-flex-pack:end;justify-content:flex-end}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:-ms-flexbox;display:flex;-ms-flex:1 1 9rem;flex:1 1 9rem}"],data:{}});function g(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-datepicker-navigation-select",[["class","ngb-dp-navigation-select"]],null,[[null,"select"]],(function(t,e,n){var i=!0;return"select"===e&&(i=!1!==t.component.select.emit(n)&&i),i}),I,w)),i["\u0275did"](1,8437760,null,0,r.gb,[r.r,i.Renderer2],{date:[0,"date"],disabled:[1,"disabled"],months:[2,"months"],years:[3,"years"]},{select:"select"})],(function(t,e){var n=e.component;t(e,1,0,n.date,n.disabled,n.selectBoxes.months,n.selectBoxes.years)}),null)}function m(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null))],null,null)}function v(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null))],null,null)}function A(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,m)),i["\u0275did"](1,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](2,0,null,null,1,"div",[["class","ngb-dp-month-name"]],null,null,null,null,null)),(t()(),i["\u0275ted"](3,null,[" "," "," "])),(t()(),i["\u0275and"](16777216,null,null,1,null,v)),i["\u0275did"](5,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](0,null,null,0))],(function(t,e){var n=e.component;t(e,1,0,e.context.index>0),t(e,5,0,e.context.index!==n.months.length-1)}),(function(t,e){var n=e.component;t(e,3,0,n.i18n.getMonthFullName(e.context.$implicit.number,e.context.$implicit.year),n.i18n.getYearNumerals(e.context.$implicit.year))}))}function b(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,A)),i["\u0275did"](1,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275and"](0,null,null,0))],(function(t,e){t(e,1,0,e.component.months)}),null)}function y(t){return i["\u0275vid"](2,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"button",[["aria-label","Previous month"],["class","btn btn-link ngb-dp-arrow-btn"],["title","Previous month"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onClickPrev(n)&&i),i}),null,null)),(t()(),i["\u0275eld"](2,0,null,null,0,"span",[["class","ngb-dp-navigation-chevron"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,g)),i["\u0275did"](4,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,b)),i["\u0275did"](6,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](7,0,null,null,2,"div",[["class","ngb-dp-arrow right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](8,0,null,null,1,"button",[["aria-label","Next month"],["class","btn btn-link ngb-dp-arrow-btn"],["title","Next month"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onClickNext(n)&&i),i}),null,null)),(t()(),i["\u0275eld"](9,0,null,null,0,"span",[["class","ngb-dp-navigation-chevron"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,4,0,n.showSelect),t(e,6,0,!n.showSelect)}),(function(t,e){var n=e.component;t(e,1,0,n.prevDisabled),t(e,8,0,n.nextDisabled)}))}var w=i["\u0275crt"]({encapsulation:2,styles:["ngb-datepicker-navigation-select>.custom-select{-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.custom-select:focus{z-index:1}ngb-datepicker-navigation-select>.custom-select::-ms-value{background-color:transparent!important}"],data:{}});function _(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"option",[],[[1,"aria-label",0]],null,null,null,null)),i["\u0275did"](1,147456,null,0,a.t,[i.ElementRef,i.Renderer2,[8,null]],{value:[0,"value"]},null),i["\u0275did"](2,147456,null,0,a.C,[i.ElementRef,i.Renderer2,[8,null]],{value:[0,"value"]},null),(t()(),i["\u0275ted"](3,null,["",""]))],(function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)}),(function(t,e){var n=e.component;t(e,0,0,n.i18n.getMonthFullName(e.context.$implicit,null==n.date?null:n.date.year)),t(e,3,0,n.i18n.getMonthShortName(e.context.$implicit,null==n.date?null:n.date.year))}))}function k(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),i["\u0275did"](1,147456,null,0,a.t,[i.ElementRef,i.Renderer2,[8,null]],{value:[0,"value"]},null),i["\u0275did"](2,147456,null,0,a.C,[i.ElementRef,i.Renderer2,[8,null]],{value:[0,"value"]},null),(t()(),i["\u0275ted"](3,null,["",""]))],(function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)}),(function(t,e){t(e,3,0,e.component.i18n.getYearNumerals(e.context.$implicit))}))}function I(t){return i["\u0275vid"](2,[i["\u0275qud"](402653184,1,{monthSelect:0}),i["\u0275qud"](402653184,2,{yearSelect:0}),(t()(),i["\u0275eld"](2,0,[[1,0],["month",1]],null,2,"select",[["aria-label","Select month"],["class","custom-select"],["title","Select month"]],[[8,"disabled",0]],[[null,"change"]],(function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.changeMonth(n.target.value)&&i),i}),null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,_)),i["\u0275did"](4,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275eld"](5,0,[[2,0],["year",1]],null,2,"select",[["aria-label","Select year"],["class","custom-select"],["title","Select year"]],[[8,"disabled",0]],[[null,"change"]],(function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.changeYear(n.target.value)&&i),i}),null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,k)),i["\u0275did"](7,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,4,0,n.months),t(e,7,0,n.years)}),(function(t,e){var n=e.component;t(e,2,0,n.disabled),t(e,5,0,n.disabled)}))}var C=i["\u0275crt"]({encapsulation:2,styles:["ngb-datepicker{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}.ngb-dp-body{z-index:1050}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-months{display:-ms-flexbox;display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}"],data:{}});function x(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","btn-light"],["ngbDatepickerDayView",""]],[[2,"bg-primary",null],[2,"text-white",null],[2,"text-muted",null],[2,"outside",null],[2,"active",null]],null,null,f,d)),i["\u0275did"](1,49152,null,0,r.eb,[r.r],{currentMonth:[0,"currentMonth"],date:[1,"date"],disabled:[2,"disabled"],focused:[3,"focused"],selected:[4,"selected"]},null)],(function(t,e){t(e,1,0,e.context.currentMonth,e.context.date,e.context.disabled,e.context.focused,e.context.selected)}),(function(t,e){t(e,0,0,i["\u0275nov"](e,1).selected,i["\u0275nov"](e,1).selected,i["\u0275nov"](e,1).isMuted(),i["\u0275nov"](e,1).isMuted(),i["\u0275nov"](e,1).focused)}))}function D(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","ngb-dp-month-name"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "," "]))],null,(function(t,e){var n=e.component;t(e,1,0,n.i18n.getMonthFullName(e.parent.context.$implicit.number,e.parent.context.$implicit.year),n.i18n.getYearNumerals(e.parent.context.$implicit.year))}))}function O(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","ngb-dp-month"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,D)),i["\u0275did"](2,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](3,0,null,null,1,"ngb-datepicker-month",[["role","grid"]],null,[[null,"keydown"]],(function(t,e,n){var r=!0;return"keydown"===e&&(r=!1!==i["\u0275nov"](t,4).onKeyDown(n)&&r),r}),G,F)),i["\u0275did"](4,49152,null,0,r.u,[r.r,r.p,r.s,r.lb],{month:[0,"month"]},null)],(function(t,e){var n=e.component;t(e,2,0,"none"===n.navigation||n.displayMonths>1&&"select"===n.navigation),t(e,4,0,e.context.$implicit.firstDate)}),null)}function E(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,O)),i["\u0275did"](1,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275and"](0,null,null,0))],(function(t,e){t(e,1,0,e.component.model.months)}),null)}function B(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-datepicker-navigation",[],null,[[null,"navigate"],[null,"select"]],(function(t,e,n){var i=!0,r=t.component;return"navigate"===e&&(i=!1!==r.onNavigateEvent(n)&&i),"select"===e&&(i=!1!==r.onNavigateDateSelect(n)&&i),i}),y,p)),i["\u0275did"](1,49152,null,0,r.fb,[r.r],{date:[0,"date"],disabled:[1,"disabled"],months:[2,"months"],showSelect:[3,"showSelect"],prevDisabled:[4,"prevDisabled"],nextDisabled:[5,"nextDisabled"],selectBoxes:[6,"selectBoxes"]},{navigate:"navigate",select:"select"})],(function(t,e){var n=e.component;t(e,1,0,n.model.firstDate,n.model.disabled,n.model.months,"select"===n.model.navigation,n.model.prevDisabled,n.model.nextDisabled,n.model.selectBoxes)}),null)}function S(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](0,null,null,0))],null,null)}function j(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](0,null,null,0))],null,null)}function R(t){return i["\u0275vid"](2,[i["\u0275qud"](402653184,1,{_defaultDayTemplate:0}),i["\u0275qud"](402653184,2,{_contentEl:0}),(t()(),i["\u0275and"](0,[[1,2],["defaultDayTemplate",2]],null,0,null,x)),(t()(),i["\u0275and"](0,[["defaultContentTemplate",2]],null,0,null,E)),(t()(),i["\u0275eld"](4,0,null,null,2,"div",[["class","ngb-dp-header"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,B)),i["\u0275did"](6,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](7,0,[[2,0],["content",1]],null,2,"div",[["class","ngb-dp-content"]],[[2,"ngb-dp-months",null]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,S)),i["\u0275did"](9,540672,null,0,s.NgTemplateOutlet,[i.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,j)),i["\u0275did"](11,540672,null,0,s.NgTemplateOutlet,[i.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],(function(t,e){var n=e.component;t(e,6,0,"none"!==n.navigation),t(e,9,0,(null==n.contentTemplate?null:n.contentTemplate.templateRef)||i["\u0275nov"](e,3)),t(e,11,0,n.footerTemplate)}),(function(t,e){t(e,7,0,!e.component.contentTemplate)}))}function T(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"ngb-datepicker",[],null,null,null,R,C)),i["\u0275prd"](5120,null,a.n,(function(t){return[t]}),[r.p]),i["\u0275prd"](512,null,r.lb,r.lb,[r.h,r.r]),i["\u0275did"](3,4964352,null,1,r.p,[r.lb,r.h,r.r,r.q,i.ChangeDetectorRef,i.ElementRef,r.n,i.NgZone],null,null),i["\u0275qud"](335544320,1,{contentTemplate:0})],(function(t,e){t(e,3,0)}),null)}var M=i["\u0275ccf"]("ngb-datepicker",r.p,T,{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate"},{navigate:"navigate",dateSelect:"dateSelect",select:"select"},[]),F=i["\u0275crt"]({encapsulation:2,styles:['ngb-datepicker-month{display:block}.ngb-dp-week-number,.ngb-dp-weekday{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:#5bc0de;color:var(--info)}.ngb-dp-week{border-radius:.25rem;display:-ms-flexbox;display:flex}.ngb-dp-weekdays{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-day,.ngb-dp-week-number,.ngb-dp-weekday{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default}.ngb-dp-day[tabindex="0"]{z-index:1}'],data:{}});function P(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"div",[["class","ngb-dp-weekday ngb-dp-showweek"]],null,null,null,null,null))],null,null)}function Q(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","ngb-dp-weekday small"],["role","columnheader"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.component.i18n.getWeekdayShortName(e.context.$implicit))}))}function N(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","ngb-dp-week ngb-dp-weekdays"],["role","row"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,P)),i["\u0275did"](2,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Q)),i["\u0275did"](4,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.datepicker.showWeekNumbers),t(e,4,0,n.viewModel.weekdays)}),null)}function U(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","ngb-dp-week-number small text-muted"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.i18n.getWeekNumerals(e.parent.parent.context.$implicit.number))}))}function V(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](0,null,null,0))],null,null)}function z(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,V)),i["\u0275did"](1,540672,null,0,s.NgTemplateOutlet,[i.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),(t()(),i["\u0275and"](0,null,null,0))],(function(t,e){t(e,1,0,e.parent.context.$implicit.context,e.component.datepicker.dayTemplate)}),null)}function L(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","ngb-dp-day"],["role","gridcell"]],[[2,"disabled",null],[8,"tabIndex",0],[2,"hidden",null],[2,"ngb-dp-today",null],[1,"aria-label",0]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(t.component.doSelect(t.context.$implicit),i=!1!==n.preventDefault()&&i),i}),null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,z)),i["\u0275did"](2,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,2,0,!e.context.$implicit.hidden)}),(function(t,e){t(e,0,0,e.context.$implicit.context.disabled,e.context.$implicit.tabindex,e.context.$implicit.hidden,e.context.$implicit.context.today,e.context.$implicit.ariaLabel)}))}function W(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","ngb-dp-week"],["role","row"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,U)),i["\u0275did"](2,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,L)),i["\u0275did"](4,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.datepicker.showWeekNumbers),t(e,4,0,e.parent.context.$implicit.days)}),null)}function H(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,W)),i["\u0275did"](1,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](0,null,null,0))],(function(t,e){t(e,1,0,!e.context.$implicit.collapsed)}),null)}function G(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,N)),i["\u0275did"](1,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,H)),i["\u0275did"](3,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.datepicker.showWeekdays),t(e,3,0,n.viewModel.weeks)}),null)}var $=i["\u0275crt"]({encapsulation:2,styles:["ngb-popover-window.bs-popover-bottom>.arrow,ngb-popover-window.bs-popover-top>.arrow{left:50%;margin-left:-.5rem}ngb-popover-window.bs-popover-bottom-left>.arrow,ngb-popover-window.bs-popover-top-left>.arrow{left:2em}ngb-popover-window.bs-popover-bottom-right>.arrow,ngb-popover-window.bs-popover-top-right>.arrow{left:auto;right:2em}ngb-popover-window.bs-popover-left>.arrow,ngb-popover-window.bs-popover-right>.arrow{top:50%;margin-top:-.5rem}ngb-popover-window.bs-popover-left-top>.arrow,ngb-popover-window.bs-popover-right-top>.arrow{top:.7em}ngb-popover-window.bs-popover-left-bottom>.arrow,ngb-popover-window.bs-popover-right-bottom>.arrow{top:auto;bottom:.7em}"],data:{}});function q(t){return i["\u0275vid"](0,[(t()(),i["\u0275ted"](0,null,["",""]))],null,(function(t,e){t(e,0,0,e.component.title)}))}function Y(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](0,null,null,0))],null,null)}function K(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"h3",[["class","popover-header"]],null,null,null,null,null)),(t()(),i["\u0275and"](0,[["simpleTitle",2]],null,0,null,q)),(t()(),i["\u0275and"](16777216,null,null,1,null,Y)),i["\u0275did"](3,540672,null,0,s.NgTemplateOutlet,[i.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null)],(function(t,e){var n=e.component;t(e,3,0,n.context,n.isTitleTemplate()?n.title:i["\u0275nov"](e,1))}),null)}function X(t){return i["\u0275vid"](2,[(t()(),i["\u0275eld"](0,0,null,null,0,"div",[["class","arrow"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,K)),i["\u0275did"](2,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](3,0,null,null,1,"div",[["class","popover-body"]],null,null,null,null,null)),i["\u0275ncd"](null,0)],(function(t,e){t(e,2,0,null!=e.component.title)}),null)}function Z(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-popover-window",[["role","tooltip"]],[[8,"className",0],[8,"id",0]],null,null,X,$)),i["\u0275did"](1,49152,null,0,r.ib,[],null,null)],null,(function(t,e){t(e,0,0,"popover"+(i["\u0275nov"](e,1).popoverClass?" "+i["\u0275nov"](e,1).popoverClass:""),i["\u0275nov"](e,1).id)}))}var J=i["\u0275ccf"]("ngb-popover-window",r.ib,Z,{title:"title",id:"id",popoverClass:"popoverClass",context:"context"},{},["*"]),tt=i["\u0275crt"]({encapsulation:2,styles:["ngb-tooltip-window.bs-tooltip-bottom .arrow,ngb-tooltip-window.bs-tooltip-top .arrow{left:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-bottom-left .arrow,ngb-tooltip-window.bs-tooltip-top-left .arrow{left:1em}ngb-tooltip-window.bs-tooltip-bottom-right .arrow,ngb-tooltip-window.bs-tooltip-top-right .arrow{left:auto;right:.8rem}ngb-tooltip-window.bs-tooltip-left .arrow,ngb-tooltip-window.bs-tooltip-right .arrow{top:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-left-top .arrow,ngb-tooltip-window.bs-tooltip-right-top .arrow{top:.4rem}ngb-tooltip-window.bs-tooltip-left-bottom .arrow,ngb-tooltip-window.bs-tooltip-right-bottom .arrow{top:auto;bottom:.4rem}"],data:{}});function et(t){return i["\u0275vid"](2,[(t()(),i["\u0275eld"](0,0,null,null,0,"div",[["class","arrow"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"div",[["class","tooltip-inner"]],null,null,null,null,null)),i["\u0275ncd"](null,0)],null,null)}function nt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-tooltip-window",[["role","tooltip"]],[[8,"className",0],[8,"id",0]],null,null,et,tt)),i["\u0275did"](1,49152,null,0,r.jb,[],null,null)],null,(function(t,e){t(e,0,0,"tooltip show"+(i["\u0275nov"](e,1).tooltipClass?" "+i["\u0275nov"](e,1).tooltipClass:""),i["\u0275nov"](e,1).id)}))}var it=i["\u0275ccf"]("ngb-tooltip-window",r.jb,nt,{id:"id",tooltipClass:"tooltipClass"},{},["*"]),rt=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function st(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-highlight",[],null,null,null,gt,ht)),i["\u0275did"](1,573440,null,0,r.w,[],{result:[0,"result"],term:[1,"term"]},null)],(function(t,e){var n=e.context.formatter(e.context.result);t(e,1,0,n,e.context.term)}),null)}function at(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](0,null,null,0))],null,null)}function ot(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"button",[["class","dropdown-item"],["role","option"],["type","button"]],[[8,"id",0],[2,"active",null]],[[null,"mouseenter"],[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"mouseenter"===e&&(i=!1!==r.markActive(t.context.index)&&i),"click"===e&&(i=!1!==r.select(t.context.$implicit)&&i),i}),null,null)),(t()(),i["\u0275and"](16777216,null,null,2,null,at)),i["\u0275did"](2,540672,null,0,s.NgTemplateOutlet,[i.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),i["\u0275pod"](3,{result:0,term:1,formatter:2})],(function(t,e){var n=e.component,r=t(e,3,0,e.context.$implicit,n.term,n.formatter);t(e,2,0,r,n.resultTemplate||i["\u0275nov"](e.parent,0))}),(function(t,e){var n=e.component;t(e,0,0,n.id+"-"+e.context.index,e.context.index===n.activeIdx)}))}function lt(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](0,[["rt",2]],null,0,null,st)),(t()(),i["\u0275and"](16777216,null,null,1,null,ot)),i["\u0275did"](2,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.results)}),null)}function ut(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-typeahead-window",[["class","dropdown-menu show"],["role","listbox"]],[[8,"id",0]],[[null,"mousedown"]],(function(t,e,n){var i=!0;return"mousedown"===e&&(i=!1!==n.preventDefault()&&i),i}),lt,rt)),i["\u0275did"](1,114688,null,0,r.kb,[],null,null)],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,i["\u0275nov"](e,1).id)}))}var ct=i["\u0275ccf"]("ngb-typeahead-window",r.kb,ut,{id:"id",focusFirst:"focusFirst",results:"results",term:"term",formatter:"formatter",resultTemplate:"resultTemplate"},{selectEvent:"select",activeChangeEvent:"activeChange"},[]),ht=i["\u0275crt"]({encapsulation:2,styles:[".ngb-highlight{font-weight:700}"],data:{}});function dt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"span",[],[[8,"className",0]],null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",""]))],null,(function(t,e){t(e,0,0,e.component.highlightClass),t(e,1,0,e.parent.context.$implicit)}))}function ft(t){return i["\u0275vid"](0,[(t()(),i["\u0275ted"](0,null,["",""]))],null,(function(t,e){t(e,0,0,e.parent.context.$implicit)}))}function pt(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,dt)),i["\u0275did"](1,16384,null,0,s.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i["\u0275and"](0,[["even",2]],null,0,null,ft))],(function(t,e){t(e,1,0,e.context.odd,i["\u0275nov"](e,2))}),null)}function gt(t){return i["\u0275vid"](2,[(t()(),i["\u0275and"](16777216,null,null,1,null,pt)),i["\u0275did"](1,278528,null,0,s.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,1,0,e.component.parts)}),null)}var mt=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function vt(t){return i["\u0275vid"](0,[],null,null)}function At(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-modal-backdrop",[["style","z-index: 1050"]],[[8,"className",0]],null,null,vt,mt)),i["\u0275did"](1,49152,null,0,r.mb,[],null,null)],null,(function(t,e){t(e,0,0,"modal-backdrop fade show"+(i["\u0275nov"](e,1).backdropClass?" "+i["\u0275nov"](e,1).backdropClass:""))}))}var bt=i["\u0275ccf"]("ngb-modal-backdrop",r.mb,At,{backdropClass:"backdropClass"},{},[]),yt=i["\u0275crt"]({encapsulation:2,styles:["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],data:{}});function wt(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{_dialogEl:0}),(t()(),i["\u0275eld"](1,0,[[1,0],["dialog",1]],null,2,"div",[["role","document"]],[[8,"className",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,1,"div",[["class","modal-content"]],null,null,null,null,null)),i["\u0275ncd"](null,0)],null,(function(t,e){var n=e.component;t(e,1,0,"modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":"")+(n.scrollable?" modal-dialog-scrollable":""))}))}function _t(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ngb-modal-window",[["role","dialog"],["tabindex","-1"]],[[8,"className",0],[1,"aria-modal",0],[1,"aria-labelledby",0]],null,null,wt,yt)),i["\u0275did"](1,4440064,null,0,r.nb,[s.DOCUMENT,i.ElementRef,i.NgZone],null,null)],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,"modal fade show d-block"+(i["\u0275nov"](e,1).windowClass?" "+i["\u0275nov"](e,1).windowClass:""),!0,i["\u0275nov"](e,1).ariaLabelledBy)}))}var kt=i["\u0275ccf"]("ngb-modal-window",r.nb,_t,{ariaLabelledBy:"ariaLabelledBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass"},{dismissEvent:"dismiss"},["*"])},G0yt:function(t,e,n){"use strict";var i=n("8Y7J"),r=n("SVse"),s=(n("s7LF"),n("XNiG")),a=n("2Vo4"),o=n("itXk"),l=n("PqYM"),u=n("5yfJ"),c=n("xgIS"),h=n("VRyK"),d=n("Nv8m"),f=(n("HDdC"),n("lJxs")),p=n("JX91"),g=n("/uUt"),m=n("eIep"),v=n("1G5W"),A=n("pLZG"),b=n("IzEk"),y=n("vkgz"),w=n("l7GE"),_=n("ZUHj");function k(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new I(t,n))}}class I{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new C(t,this.observables,this.project))}}class C extends w.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let r=0;r<i;r++)this.toRespond.push(r);for(let r=0;r<i;r++){let t=e[r];this.add(Object(_.a)(this,t,t,r))}}notifyNext(t,e,n,i,r){this.values[n]=e;const s=this.toRespond;if(s.length>0){const t=s.indexOf(n);-1!==t&&s.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var x=n("3E0/");function D(t){return parseInt(""+t,10)}function O(t){return null!=t?""+t:""}function E(t,e,n=0){return Math.max(Math.min(t,e),n)}function B(t){return"string"==typeof t}function S(t){return!isNaN(D(t))}function j(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function R(t){return null!=t}function T(t){return S(t)?("0"+t).slice(-2):""}function M(t,e){return t&&t.className&&t.className.split&&t.className.split(/\s+/).indexOf(e)>=0}n("w1tV"),n.d(e,"a",(function(){return Q})),n.d(e,"b",(function(){return F})),n.d(e,"c",(function(){return U})),n.d(e,"d",(function(){return z})),n.d(e,"e",(function(){return V})),n.d(e,"f",(function(){return L})),n.d(e,"g",(function(){return W})),n.d(e,"h",(function(){return et})),n.d(e,"i",(function(){return G})),n.d(e,"j",(function(){return H})),n.d(e,"k",(function(){return Y})),n.d(e,"l",(function(){return K})),n.d(e,"m",(function(){return X})),n.d(e,"n",(function(){return ft})),n.d(e,"o",(function(){return Bt})),n.d(e,"p",(function(){return gt})),n.d(e,"q",(function(){return ht})),n.d(e,"r",(function(){return ot})),n.d(e,"s",(function(){return vt})),n.d(e,"t",(function(){return Ft})),n.d(e,"u",(function(){return At})),n.d(e,"v",(function(){return Pt})),n.d(e,"w",(function(){return De})),n.d(e,"x",(function(){return Rt})),n.d(e,"y",(function(){return jt})),n.d(e,"z",(function(){return qt})),n.d(e,"A",(function(){return Qt})),n.d(e,"B",(function(){return Yt})),n.d(e,"C",(function(){return Be})),n.d(e,"D",(function(){return Xt})),n.d(e,"E",(function(){return Kt})),n.d(e,"F",(function(){return Jt})),n.d(e,"G",(function(){return Zt})),n.d(e,"H",(function(){return te})),n.d(e,"I",(function(){return P})),n.d(e,"J",(function(){return N})),n.d(e,"K",(function(){return ne})),n.d(e,"L",(function(){return re})),n.d(e,"M",(function(){return ie})),n.d(e,"N",(function(){return se})),n.d(e,"O",(function(){return oe})),n.d(e,"P",(function(){return ae})),n.d(e,"Q",(function(){return le})),n.d(e,"R",(function(){return ce})),n.d(e,"S",(function(){return ue})),n.d(e,"T",(function(){return he})),n.d(e,"U",(function(){return ge})),n.d(e,"V",(function(){return ye})),n.d(e,"W",(function(){return fe})),n.d(e,"X",(function(){return ve})),n.d(e,"Y",(function(){return we})),n.d(e,"Z",(function(){return ke})),n.d(e,"ab",(function(){return _e})),n.d(e,"bb",(function(){return Ie})),n.d(e,"cb",(function(){return xe})),n.d(e,"db",(function(){return Ee})),n.d(e,"eb",(function(){return Tt})),n.d(e,"fb",(function(){return bt})),n.d(e,"gb",(function(){return Mt})),n.d(e,"hb",(function(){return Et})),n.d(e,"ib",(function(){return ee})),n.d(e,"jb",(function(){return Ce})),n.d(e,"kb",(function(){return Oe})),n.d(e,"lb",(function(){return ut})),n.d(e,"mb",(function(){return zt})),n.d(e,"nb",(function(){return Gt})),n.d(e,"ob",(function(){return $t})),"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});let F=(()=>{class t{constructor(){this.closeOthers=!1}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class P{constructor(t){this.templateRef=t}}class Q{constructor(t){this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new i.EventEmitter,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const e=this._findPanelById(t);e&&this._changeOpenState(e,!e.isOpen)}ngAfterContentChecked(){B(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0]),this._updateActiveIds())}_changeOpenState(t,e){if(t&&!t.disabled&&t.isOpen!==e){let n=!1;this.panelChange.emit({panelId:t.id,nextState:e,preventDefault:()=>{n=!0}}),n||(t.isOpen=e,e&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds())}}_closeOthers(t){this.panels.forEach(e=>{e.id!==t&&(e.isOpen=!1)})}_findPanelById(t){return this.panels.find(e=>e.id===t)}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}}class N{constructor(t,e){this.accordion=t,this.panel=e}set ngbPanelToggle(t){t&&(this.panel=t)}}class U{}let V=(()=>{class t{constructor(){this.dismissible=!0,this.type="warning"}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class z{constructor(t,e,n){this._renderer=e,this._element=n,this.close=new i.EventEmitter,this.dismissible=t.dismissible,this.type=t.type}closeHandler(){this.close.emit(null)}ngOnChanges(t){const e=t.type;e&&!e.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+e.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+e.currentValue))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)}}class L{}class W{}let H=(()=>{class t{constructor(){this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class G{constructor(t,e,n,r){this._platformId=e,this._ngZone=n,this._cd=r,this.NgbSlideEventSource=q,this._destroy$=new s.a,this._interval$=new a.a(0),this._mouseHover$=new a.a(!1),this._pauseOnHover$=new a.a(!1),this._pause$=new a.a(!1),this._wrap$=new a.a(!1),this.slide=new i.EventEmitter,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}mouseEnter(){this._mouseHover$.next(!0)}mouseLeave(){this._mouseHover$.next(!1)}ngAfterContentInit(){Object(r.isPlatformBrowser)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=Object(o.a)(this.slide.pipe(Object(f.a)(t=>t.current),Object(p.a)(this.activeId)),this._wrap$,this.slides.changes.pipe(Object(p.a)(null))).pipe(Object(f.a)(([t,e])=>{const n=this.slides.toArray(),i=this._getSlideIdxById(t);return e?n.length>1:i<n.length-1}),Object(g.a)());Object(o.a)(this._pause$,this._pauseOnHover$,this._mouseHover$,this._interval$,t).pipe(Object(f.a)(([t,e,n,i,r])=>t||e&&n||!r?0:i),Object(g.a)(),Object(m.a)(t=>t>0?Object(l.a)(t,t):u.a),Object(v.a)(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(q.TIMER)))}),this.slides.changes.pipe(Object(v.a)(this._destroy$)).subscribe(()=>this._cd.markForCheck())}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:null}ngOnDestroy(){this._destroy$.next()}select(t,e){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),e)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),$.RIGHT,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),$.LEFT,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}_cycleToSelected(t,e,n){let i=this._getSlideById(t);i&&i.id!==this.activeId&&(this.slide.emit({prev:this.activeId,current:i.id,direction:e,paused:this._pause$.value,source:n}),this.activeId=i.id),this._cd.markForCheck()}_getSlideEventDirection(t,e){return this._getSlideIdxById(t)>this._getSlideIdxById(e)?$.RIGHT:$.LEFT}_getSlideById(t){return this.slides.find(e=>e.id===t)}_getSlideIdxById(t){return this.slides.toArray().indexOf(this._getSlideById(t))}_getNextSlide(t){const e=this.slides.toArray(),n=this._getSlideIdxById(t);return n===e.length-1?this.wrap?e[0].id:e[e.length-1].id:e[n+1].id}_getPrevSlide(t){const e=this.slides.toArray(),n=this._getSlideIdxById(t);return 0===n?this.wrap?e[e.length-1].id:e[0].id:e[n-1].id}}const $={LEFT:"left",RIGHT:"right"},q={TIMER:"timer",ARROW_LEFT:"arrowLeft",ARROW_RIGHT:"arrowRight",INDICATOR:"indicator"};class Y{}class K{}class X{static from(t){return t instanceof X?t:t?new X(t.year,t.month,t.day):null}constructor(t,e,n){this.year=j(t)?t:null,this.month=j(e)?e:null,this.day=j(n)?n:null}equals(t){return t&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day<t.day:this.month<t.month:this.year<t.year)}after(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day>t.day:this.month>t.month:this.year>t.year)}}function Z(t){return new X(t.getFullYear(),t.getMonth()+1,t.getDate())}function J(t){const e=new Date(t.year,t.month-1,t.day,12);return isNaN(e.getTime())||e.setFullYear(t.year),e}function tt(){return new nt}let et=(()=>{class t{}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:tt,token:t,providedIn:"root"}),t})();class nt extends et{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,e="d",n=1){let i=J(t),r=!0,s=i.getMonth();switch(e){case"y":i.setFullYear(i.getFullYear()+n);break;case"m":s+=n,i.setMonth(s),s%=12,s<0&&(s+=12);break;case"d":i.setDate(i.getDate()+n),r=!1;break;default:return t}return r&&i.getMonth()!==s&&i.setDate(0),Z(i)}getPrev(t,e="d",n=1){return this.getNext(t,e,-n)}getWeekday(t){let e=J(t).getDay();return 0===e?7:e}getWeekNumber(t,e){7===e&&(e=0);const n=J(t[(11-e)%7]);n.setDate(n.getDate()+4-(n.getDay()||7));const i=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((i-n.getTime())/864e5)/7)+1}getToday(){return Z(new Date)}isValid(t){if(!(t&&j(t.year)&&j(t.month)&&j(t.day)))return!1;if(0===t.year)return!1;const e=J(t);return!isNaN(e.getTime())&&e.getFullYear()===t.year&&e.getMonth()+1===t.month&&e.getDate()===t.day}}function it(t,e){return!function(t,e){return!t&&!e||!!t&&!!e&&t.equals(e)}(t,e)}function rt(t,e){return!(!t&&!e||t&&e&&t.year===e.year&&t.month===e.month)}function st(t,e,n){return t&&e&&t.before(e)?e:t&&n&&t.after(n)?n:t}function at(t,e){const{minDate:n,maxDate:i,disabled:r,markDisabled:s}=e;return!(!R(t)||r||s&&s(t,{year:t.year,month:t.month})||n&&t.before(n)||i&&t.after(i))}let ot=(()=>{class t{getDayNumerals(t){return""+t.day}getWeekNumerals(t){return""+t}getYearNumerals(t){return""+t}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return t=Object(i["\u0275\u0275inject"])(i.LOCALE_ID),new lt(t);var t},token:t,providedIn:"root"}),t})();class lt extends ot{constructor(t){super(),this._locale=t;const e=Object(r.getLocaleDayNames)(t,r.FormStyle.Standalone,r.TranslationWidth.Short);this._weekdaysShort=e.map((t,n)=>e[(n+1)%7]),this._monthsShort=Object(r.getLocaleMonthNames)(t,r.FormStyle.Standalone,r.TranslationWidth.Abbreviated),this._monthsFull=Object(r.getLocaleMonthNames)(t,r.FormStyle.Standalone,r.TranslationWidth.Wide)}getWeekdayShortName(t){return this._weekdaysShort[t-1]}getMonthShortName(t){return this._monthsShort[t-1]}getMonthFullName(t){return this._monthsFull[t-1]}getDayAriaLabel(t){const e=new Date(t.year,t.month-1,t.day);return Object(r.formatDate)(e,"fullDate",this._locale)}}class ut{constructor(t,e){this._calendar=t,this._i18n=e,this._VALIDATORS={dayTemplateData:t=>{if(this._state.dayTemplateData!==t)return{dayTemplateData:t}},displayMonths:t=>{if(j(t=D(t))&&t>0&&this._state.displayMonths!==t)return{displayMonths:t}},disabled:t=>{if(this._state.disabled!==t)return{disabled:t}},firstDayOfWeek:t=>{if(j(t=D(t))&&t>=0&&this._state.firstDayOfWeek!==t)return{firstDayOfWeek:t}},focusVisible:t=>{if(this._state.focusVisible!==t&&!this._state.disabled)return{focusVisible:t}},markDisabled:t=>{if(this._state.markDisabled!==t)return{markDisabled:t}},maxDate:t=>{const e=this.toValidDate(t,null);if(it(this._state.maxDate,e))return{maxDate:e}},minDate:t=>{const e=this.toValidDate(t,null);if(it(this._state.minDate,e))return{minDate:e}},navigation:t=>{if(this._state.navigation!==t)return{navigation:t}},outsideDays:t=>{if(this._state.outsideDays!==t)return{outsideDays:t}}},this._model$=new s.a,this._dateSelect$=new s.a,this._state={disabled:!1,displayMonths:1,firstDayOfWeek:1,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectBoxes:{years:[],months:[]},selectedDate:null}}get model$(){return this._model$.pipe(Object(A.a)(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Object(A.a)(t=>null!==t))}set(t){let e=Object.keys(t).map(e=>this._VALIDATORS[e](t[e])).reduce((t,e)=>Object.assign({},t,e),{});Object.keys(e).length>0&&this._nextState(e)}focus(t){!this._state.disabled&&this._calendar.isValid(t)&&it(this._state.focusDate,t)&&this._nextState({focusDate:t})}focusSelect(){at(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const e=this.toValidDate(t,this._calendar.getToday());this._state.disabled||this._state.firstDate&&!rt(this._state.firstDate,t)||this._nextState({firstDate:e})}select(t,e={}){const n=this.toValidDate(t,null);this._state.disabled||(it(this._state.selectedDate,n)&&this._nextState({selectedDate:n}),e.emitEvent&&at(n,this._state)&&this._dateSelect$.next(n))}toValidDate(t,e){const n=X.from(t);return void 0===e&&(e=this._calendar.getToday()),this._calendar.isValid(n)?n:e}getMonth(t){for(let e of this._state.months)if(t.month===e.number&&t.year===e.year)return e;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const e=this._updateState(t);this._patchContexts(e),this._state=e,this._model$.next(this._state)}_patchContexts(t){const{months:e,displayMonths:n,selectedDate:i,focusDate:r,focusVisible:s,disabled:a,outsideDays:o}=t;t.months.forEach(t=>{t.weeks.forEach(l=>{l.days.forEach(l=>{r&&(l.context.focused=r.equals(l.date)&&s),l.tabindex=!a&&l.date.equals(r)&&r.month===t.number?0:-1,!0===a&&(l.context.disabled=!0),void 0!==i&&(l.context.selected=null!==i&&i.equals(l.date)),t.number!==l.date.month&&(l.hidden="hidden"===o||"collapsed"===o||n>1&&l.date.after(e[0].firstDate)&&l.date.before(e[n-1].lastDate))})})})}_updateState(t){const e=Object.assign({},this._state,t);let n=e.firstDate;if(("minDate"in t||"maxDate"in t)&&(function(t,e){if(e&&t&&e.before(t))throw new Error(`'maxDate' ${e} should be greater than 'minDate' ${t}`)}(e.minDate,e.maxDate),e.focusDate=st(e.focusDate,e.minDate,e.maxDate),e.firstDate=st(e.firstDate,e.minDate,e.maxDate),n=e.focusDate),"disabled"in t&&(e.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(n=e.selectedDate),"focusVisible"in t)return e;if("focusDate"in t&&(e.focusDate=st(e.focusDate,e.minDate,e.maxDate),n=e.focusDate,0!==e.months.length&&!e.focusDate.before(e.firstDate)&&!e.focusDate.after(e.lastDate)))return e;if("firstDate"in t&&(e.firstDate=st(e.firstDate,e.minDate,e.maxDate),n=e.firstDate),n){const i=function(t,e,n,i,r){const{displayMonths:s,months:a}=n,o=a.splice(0,a.length);return Array.from({length:s},(n,i)=>{const s=Object.assign(t.getNext(e,"m",i),{day:1});if(a[i]=null,!r){const t=o.findIndex(t=>t.firstDate.equals(s));-1!==t&&(a[i]=o.splice(t,1)[0])}return s}).forEach((e,r)=>{null===a[r]&&(a[r]=function(t,e,n,i,r={}){const{dayTemplateData:s,minDate:a,maxDate:o,firstDayOfWeek:l,markDisabled:u,outsideDays:c}=n,h=t.getToday();r.firstDate=null,r.lastDate=null,r.number=e.month,r.year=e.year,r.weeks=r.weeks||[],r.weekdays=r.weekdays||[],e=function(t,e,n){const i=t.getDaysPerWeek(),r=new X(e.year,e.month,1),s=t.getWeekday(r)%i;return t.getPrev(r,"d",(i+s-n)%i)}(t,e,l);for(let d=0;d<t.getWeeksPerMonth();d++){let n=r.weeks[d];n||(n=r.weeks[d]={number:0,days:[],collapsed:!0});const f=n.days;for(let l=0;l<t.getDaysPerWeek();l++){0===d&&(r.weekdays[l]=t.getWeekday(e));const n=new X(e.year,e.month,e.day),c=t.getNext(n),p=i.getDayAriaLabel(n);let g=!!(a&&n.before(a)||o&&n.after(o));!g&&u&&(g=u(n,{month:r.number,year:r.year}));let m=n.equals(h),v=s?s(n,{month:r.number,year:r.year}):void 0;null===r.firstDate&&n.month===r.number&&(r.firstDate=n),n.month===r.number&&c.month!==r.number&&(r.lastDate=n);let A=f[l];A||(A=f[l]={}),A.date=n,A.context=Object.assign(A.context||{},{$implicit:n,date:n,data:v,currentMonth:r.number,currentYear:r.year,disabled:g,focused:!1,selected:!1,today:m}),A.tabindex=-1,A.ariaLabel=p,A.hidden=!1,e=c}n.number=t.getWeekNumber(f.map(t=>t.date),l),n.collapsed="collapsed"===c&&f[0].date.month!==r.number&&f[f.length-1].date.month!==r.number}return r}(t,e,n,i,o.shift()||{}))}),a}(this._calendar,n,e,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t);e.months=i,e.firstDate=i.length>0?i[0].firstDate:void 0,e.lastDate=i.length>0?i[i.length-1].lastDate:void 0,"selectedDate"in t&&!at(e.selectedDate,e)&&(e.selectedDate=null),"firstDate"in t&&(void 0===e.focusDate||e.focusDate.before(e.firstDate)||e.focusDate.after(e.lastDate))&&(e.focusDate=n);const r=!this._state.firstDate||this._state.firstDate.year!==e.firstDate.year,s=!this._state.firstDate||this._state.firstDate.month!==e.firstDate.month;"select"===e.navigation?(("minDate"in t||"maxDate"in t||0===e.selectBoxes.years.length||r)&&(e.selectBoxes.years=function(t,e,n){if(!t)return[];const i=e?Math.max(e.year,t.year-500):t.year-10,r=(n?Math.min(n.year,t.year+500):t.year+10)-i+1,s=Array(r);for(let a=0;a<r;a++)s[a]=i+a;return s}(e.firstDate,e.minDate,e.maxDate)),("minDate"in t||"maxDate"in t||0===e.selectBoxes.months.length||r)&&(e.selectBoxes.months=function(t,e,n,i){if(!e)return[];let r=t.getMonths(e.year);if(n&&e.year===n.year){const t=r.findIndex(t=>t===n.month);r=r.slice(t)}if(i&&e.year===i.year){const t=r.findIndex(t=>t===i.month);r=r.slice(0,t+1)}return r}(this._calendar,e.firstDate,e.minDate,e.maxDate))):e.selectBoxes={years:[],months:[]},"arrows"!==e.navigation&&"select"!==e.navigation||!(s||r||"minDate"in t||"maxDate"in t||"disabled"in t)||(e.prevDisabled=e.disabled||function(t,e,n){const i=Object.assign(t.getPrev(e,"m"),{day:1});return n&&(i.year===n.year&&i.month<n.month||i.year<n.year&&1===n.month)}(this._calendar,e.firstDate,e.minDate),e.nextDisabled=e.disabled||function(t,e,n){const i=Object.assign(t.getNext(e,"m"),{day:1});return n&&i.after(n)}(this._calendar,e.lastDate,e.maxDate))}return e}}const ct=function(){var t={PREV:0,NEXT:1};return t[t.PREV]="PREV",t[t.NEXT]="NEXT",t}();let ht=(()=>{class t{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekdays=!0,this.showWeekNumbers=!1}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();function dt(){return new pt}let ft=(()=>{class t{}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:dt,token:t,providedIn:"root"}),t})();class pt extends ft{fromModel(t){return t&&j(t.year)&&j(t.month)&&j(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&j(t.year)&&j(t.month)&&j(t.day)?{year:t.year,month:t.month,day:t.day}:null}}class gt{constructor(t,e,n,r,a,o,l,u){this._service=t,this._calendar=e,this.i18n=n,this._elementRef=o,this._ngbDateAdapter=l,this._ngZone=u,this._destroyed$=new s.a,this._publicState={},this.navigate=new i.EventEmitter,this.dateSelect=new i.EventEmitter,this.select=this.dateSelect,this.onChange=t=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekdays","showWeekNumbers","startDate"].forEach(t=>this[t]=r[t]),t.dateSelect$.pipe(Object(v.a)(this._destroyed$)).subscribe(t=>{this.dateSelect.emit(t)}),t.model$.pipe(Object(v.a)(this._destroyed$)).subscribe(t=>{const e=t.firstDate,n=this.model?this.model.firstDate:null;this._publicState={maxDate:t.maxDate,minDate:t.minDate,firstDate:t.firstDate,lastDate:t.lastDate,focusedDate:t.focusDate,months:t.months.map(t=>t.firstDate)};let i=!1;if(!e.equals(n)&&(this.navigate.emit({current:n?{year:n.year,month:n.month}:null,next:{year:e.year,month:e.month},preventDefault:()=>i=!0}),i&&null!==n))return void this._service.open(n);const r=t.selectedDate,s=t.focusDate,o=this.model?this.model.focusDate:null;this.model=t,it(r,this._controlValue)&&(this._controlValue=r,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(r))),it(s,o)&&o&&t.focusVisible&&this.focus(),a.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(X.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Object(b.a)(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(X.from(t?t.day?t:Object.assign({},t,{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=Object(c.a)(this._contentEl.nativeElement,"focusin"),e=Object(c.a)(this._contentEl.nativeElement,"focusout"),{nativeElement:n}=this._elementRef;Object(h.a)(t,e).pipe(Object(A.a)(({target:t,relatedTarget:e})=>!(M(t,"ngb-dp-day")&&M(e,"ngb-dp-day")&&n.contains(t)&&n.contains(e))),Object(v.a)(this._destroyed$)).subscribe(({type:t})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===t})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].forEach(e=>t[e]=this[e]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const e={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].filter(e=>e in t).forEach(t=>e[t]=this[t]),this._service.set(e),"startDate"in t){const{currentValue:e,previousValue:n}=t.startDate;rt(n,e)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case ct.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case ct.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=X.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}const mt=function(){var t={Tab:9,Enter:13,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40};return t[t.Tab]="Tab",t[t.Enter]="Enter",t[t.Escape]="Escape",t[t.Space]="Space",t[t.PageUp]="PageUp",t[t.PageDown]="PageDown",t[t.End]="End",t[t.Home]="Home",t[t.ArrowLeft]="ArrowLeft",t[t.ArrowUp]="ArrowUp",t[t.ArrowRight]="ArrowRight",t[t.ArrowDown]="ArrowDown",t}();let vt=(()=>{class t{processKey(t,e){const{state:n,calendar:i}=e;switch(t.which){case mt.PageUp:e.focusDate(i.getPrev(n.focusedDate,t.shiftKey?"y":"m",1));break;case mt.PageDown:e.focusDate(i.getNext(n.focusedDate,t.shiftKey?"y":"m",1));break;case mt.End:e.focusDate(t.shiftKey?n.maxDate:n.lastDate);break;case mt.Home:e.focusDate(t.shiftKey?n.minDate:n.firstDate);break;case mt.ArrowLeft:e.focusDate(i.getPrev(n.focusedDate,"d",1));break;case mt.ArrowUp:e.focusDate(i.getPrev(n.focusedDate,"d",i.getDaysPerWeek()));break;case mt.ArrowRight:e.focusDate(i.getNext(n.focusedDate,"d",1));break;case mt.ArrowDown:e.focusDate(i.getNext(n.focusedDate,"d",i.getDaysPerWeek()));break;case mt.Enter:case mt.Space:e.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class At{constructor(t,e,n,i){this.i18n=t,this.datepicker=e,this._keyboardService=n,this._service=i}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){t.context.disabled||t.hidden||this.datepicker.onDateSelect(t.date)}}class bt{constructor(t){this.i18n=t,this.navigation=ct,this.months=[],this.navigate=new i.EventEmitter,this.select=new i.EventEmitter}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}const yt=(t,e)=>!!e&&e.some(e=>e.contains(t)),wt=(t,e)=>!e||null!=function(t,e){return e?t.closest(e):null}(t,e),_t=(()=>"undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)))(),kt=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function It(t){const e=Array.from(t.querySelectorAll(kt)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const Ct=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{const t=Object(c.a)(e,"focusin").pipe(Object(v.a)(n),Object(f.a)(t=>t.target));Object(c.a)(e,"keydown").pipe(Object(v.a)(n),Object(A.a)(t=>t.which===mt.Tab),k(t)).subscribe(([t,n])=>{const[i,r]=It(e);n!==i&&n!==e||!t.shiftKey||(r.focus(),t.preventDefault()),n!==r||t.shiftKey||(i.focus(),t.preventDefault())}),i&&Object(c.a)(e,"click").pipe(Object(v.a)(n),k(t),Object(f.a)(t=>t[1])).subscribe(t=>t.focus())})};class xt{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(i=this.offset(e,!1)),i.top+=e.clientTop,i.left+=e.clientLeft}return n.top-=i.top,n.bottom-=i.top,n.left-=i.left,n.right-=i.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),i=window.pageYOffset-document.documentElement.clientTop,r=window.pageXOffset-document.documentElement.clientLeft;let s={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+i,bottom:n.bottom+i,left:n.left+r,right:n.right+r};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(t,e,n,i){const[r="top",s="center"]=n.split("-"),a=i?this.offset(t,!1):this.position(t,!1),o=this.getAllStyles(e),l=parseFloat(o.marginTop),u=parseFloat(o.marginBottom),c=parseFloat(o.marginLeft),h=parseFloat(o.marginRight);let d=0,f=0;switch(r){case"top":d=a.top-(e.offsetHeight+l+u);break;case"bottom":d=a.top+a.height;break;case"left":f=a.left-(e.offsetWidth+c+h);break;case"right":f=a.left+a.width}switch(s){case"top":d=a.top;break;case"bottom":d=a.top+a.height-e.offsetHeight;break;case"left":f=a.left;break;case"right":f=a.left+a.width-e.offsetWidth;break;case"center":"top"===r||"bottom"===r?f=a.left+a.width/2-e.offsetWidth/2:d=a.top+a.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,v=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=v&&p.bottom<=m}}const Dt=/\s+/,Ot=new xt;function Et(){return new St}let Bt=(()=>{class t{}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:Et,token:t,providedIn:"root"}),t})();class St extends Bt{parse(t){if(t){const e=t.trim().split("-");if(1===e.length&&S(e[0]))return{year:D(e[0]),month:null,day:null};if(2===e.length&&S(e[0])&&S(e[1]))return{year:D(e[0]),month:D(e[1]),day:null};if(3===e.length&&S(e[0])&&S(e[1])&&S(e[2]))return{year:D(e[0]),month:D(e[1]),day:D(e[2])}}return null}format(t){return t?`${t.year}-${S(t.month)?T(t.month):""}-${S(t.day)?T(t.day):""}`:""}}let jt=(()=>{class t extends ht{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"],this.restoreFocus=!0}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class Rt{constructor(t,e,n,r,s,a,o,l,u,c,h){this._parserFormatter=t,this._elRef=e,this._vcRef=n,this._renderer=r,this._cfr=s,this._ngZone=a,this._calendar=o,this._dateAdapter=l,this._document=u,this._changeDetector=c,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this.dateSelect=new i.EventEmitter,this.navigate=new i.EventEmitter,this.closed=new i.EventEmitter,this._onChange=t=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement"].forEach(t=>this[t]=h[t]),this._zoneSubscription=a.onStable.subscribe(()=>this._updatePopupPosition())}get disabled(){return this._disabled}set disabled(t){this._disabled=""===t||t&&"false"!==t,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}registerOnValidatorChange(t){this._validatorChange=t}setDisabledState(t){this.disabled=t}validate(t){const e=t.value;if(null==e)return null;const n=this._fromDateStruct(this._dateAdapter.fromModel(e));return this._calendar.isValid(n)?this.minDate&&n.before(X.from(this.minDate))?{ngbDate:{requiredBefore:this.minDate}}:this.maxDate&&n.after(X.from(this.maxDate))?{ngbDate:{requiredAfter:this.maxDate}}:void 0:{ngbDate:{invalid:t.value}}}writeValue(t){this._model=this._fromDateStruct(this._dateAdapter.fromModel(t)),this._writeModelValue(this._model)}manualDateChange(t,e=!1){const n=t!==this._inputValue;n&&(this._inputValue=t,this._model=this._fromDateStruct(this._parserFormatter.parse(t))),!n&&e||this._onChange(this._model?this._dateAdapter.toModel(this._model):""===t?null:t),e&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){const t=this._cfr.resolveComponentFactory(gt);this._cRef=this._vcRef.createComponent(t),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef.instance),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(t=>{this.writeValue(t),this._onChange(t),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&window.document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,Ct(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),this._cRef.instance.focus(),function(t,e,n,i,r,s,a,o){var l;n&&t.runOutsideAngular((l=()=>{const o=Object(c.a)(e,"keydown").pipe(Object(v.a)(r),Object(A.a)(t=>t.which===mt.Escape),Object(y.a)(t=>t.preventDefault())),l=Object(c.a)(e,"mousedown").pipe(Object(f.a)(t=>{const e=t.target;return 2!==t.button&&!yt(e,a)&&("inside"===n?yt(e,s)&&wt(e,void 0):"outside"===n?!yt(e,s):wt(e,void 0)||!yt(e,s))}),Object(v.a)(r)),u=Object(c.a)(e,"mouseup").pipe(k(l),Object(A.a)(([t,e])=>e),Object(x.a)(0),Object(v.a)(r));Object(d.a)([o,u]).subscribe(()=>t.run(i))},_t?()=>setTimeout(()=>l(),100):l))}(this._ngZone,this._document,this.autoClose,()=>this.close(),this.closed,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this.closed.emit(),this._changeDetector.markForCheck();let t=this._elWithFocus;B(this.restoreFocus)?t=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(t=this.restoreFocus),t&&t.focus?t.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(t){this.isOpen()&&this._cRef.instance.navigateTo(t)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(t){(t.minDate||t.maxDate)&&(this._validatorChange(),this.isOpen()&&(t.minDate&&(this._cRef.instance.minDate=this.minDate),t.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(t)))}ngOnDestroy(){this.close(),this._zoneSubscription.unsubscribe()}_applyDatepickerInputs(t){["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekdays","showWeekNumbers"].forEach(e=>{void 0!==this[e]&&(t[e]=this[e])}),t.startDate=this.startDate||this._model}_applyPopupStyling(t){this._renderer.addClass(t,"dropdown-menu"),this._renderer.addClass(t,"show"),"body"===this.container&&this._renderer.addClass(t,"ngb-dp-body")}_subscribeForDatepickerOutputs(t){t.navigate.subscribe(t=>this.navigate.emit(t)),t.dateSelect.subscribe(t=>{this.dateSelect.emit(t),!0!==this.autoClose&&"inside"!==this.autoClose||this.close()})}_writeModelValue(t){const e=this._parserFormatter.format(t);this._inputValue=e,this._renderer.setProperty(this._elRef.nativeElement,"value",e),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(t)),this._onTouched())}_fromDateStruct(t){const e=t?new X(t.year,t.month,t.day):null;return this._calendar.isValid(e)?e:null}_updatePopupPosition(){if(!this._cRef)return;let t;if(t=B(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this.positionTarget&&!t)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");!function(t,e,n,i,r){let s=Array.isArray(n)?n:n.split(Dt);const a=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],o=t=>{const[e,n]=t.split("-"),i=[];return i};let l=s.findIndex(t=>"auto"===t);l>=0&&a.forEach((function(t){null==s.find(e=>-1!==e.search("^"+t))&&s.splice(l++,1,t)}));const u=e.style;let c;u.position="absolute",u.top="0",u.left="0",u["will-change"]="transform";let h=!1;for(c of s){o(c);if(Ot.positionElements(t,e,c,i)){h=!0;break}}h||(c=s[0],o(c),Ot.positionElements(t,e,c,i))}(t,this._cRef.location.nativeElement,this.placement,"body"===this.container)}}class Tt{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}class Mt{constructor(t,e){this.i18n=t,this._renderer=e,this.select=new i.EventEmitter,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new X(this.date.year,D(t),1))}changeYear(t){this.select.emit(new X(D(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}class Ft{}class Pt{}let Qt=(()=>{class t{constructor(){this.backdrop=!0,this.keyboard=!0}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class Nt{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const Ut=()=>{};let Vt=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):Ut}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,i=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=i+t+"px",()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t(Object(i["\u0275\u0275inject"])(r.DOCUMENT))},token:t,providedIn:"root"}),t})();class zt{}class Lt{close(t){}dismiss(t){}}class Wt{constructor(t,e,n,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=i,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}close(t){this._windowCmptRef&&(this._resolve(t),this._removeModalElements())}_dismiss(t){this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.location.nativeElement;if(t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._backdropCmptRef){const t=this._backdropCmptRef.location.nativeElement;t.parentNode.removeChild(t),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null}}const Ht=function(){var t={BACKDROP_CLICK:0,ESC:1};return t[t.BACKDROP_CLICK]="BACKDROP_CLICK",t[t.ESC]="ESC",t}();class Gt{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new s.a,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new i.EventEmitter}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){const{nativeElement:t}=this._elRef;if(this._zone.runOutsideAngular(()=>{Object(c.a)(t,"keydown").pipe(Object(v.a)(this._closed$),Object(A.a)(t=>t.which===mt.Escape&&this.keyboard)).subscribe(t=>requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(Ht.ESC))}));let e=!1;Object(c.a)(this._dialogEl.nativeElement,"mousedown").pipe(Object(v.a)(this._closed$),Object(y.a)(()=>e=!1),Object(m.a)(()=>Object(c.a)(t,"mouseup").pipe(Object(v.a)(this._closed$),Object(b.a)(1))),Object(A.a)(({target:e})=>t===e)).subscribe(()=>{e=!0}),Object(c.a)(t,"click").pipe(Object(v.a)(this._closed$)).subscribe(({target:n})=>{!0!==this.backdrop||t!==n||e||this._zone.run(()=>this.dismiss(Ht.BACKDROP_CLICK)),e=!1})}),!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=It(t)[0];(e||n||t).focus()}}ngOnDestroy(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null}),this._closed$.next()}}let $t=(()=>{class t{constructor(t,e,n,i,r,a){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=r,this._ngZone=a,this._activeWindowCmptHasChanged=new s.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowAttributes=["ariaLabelledBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];Ct(this._ngZone,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,i){const r=i.container instanceof HTMLElement?i.container:R(i.container)?this._document.querySelector(i.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),a=this._scrollBar.compensate(),o=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!r)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);const l=new Lt,u=this._getContentRef(t,i.injector||e,n,l,i);let c=!1!==i.backdrop?this._attachBackdrop(t,r):null,h=this._attachWindowComponent(t,r,u),d=new Wt(h,u,c,i.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(a,a),d.result.then(o,o),l.close=t=>{d.close(t)},l.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,i),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),c&&c.instance&&this._applyBackdropOptions(c.instance,i),d}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(zt).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let i=t.resolveComponentFactory(Gt).create(this._injector,n.nodes);return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{R(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{R(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,r,s){return n?n instanceof i.TemplateRef?this._createFromTemplateRef(n,r):B(n)?this._createFromString(n):this._createFromComponent(t,e,n,r,s):new Nt([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new Nt([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(""+t);return new Nt([[e]])}_createFromComponent(t,e,n,r,s){const a=t.resolveComponentFactory(n),o=i.Injector.create({providers:[{provide:Lt,useValue:r}],parent:e}),l=a.create(o),u=l.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new Nt([[u]],l.hostView,l)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&this._modalRefs.splice(e,1)};this._modalRefs.push(t),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t(Object(i["\u0275\u0275inject"])(i.ApplicationRef),Object(i["\u0275\u0275inject"])(i.INJECTOR),Object(i["\u0275\u0275inject"])(r.DOCUMENT),Object(i["\u0275\u0275inject"])(Vt),Object(i["\u0275\u0275inject"])(i.RendererFactory2),Object(i["\u0275\u0275inject"])(i.NgZone))},token:t,providedIn:"root"}),t})(),qt=(()=>{class t{constructor(t,e,n,i){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=i}open(t,e={}){const n=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t(Object(i["\u0275\u0275inject"])(i.ComponentFactoryResolver),Object(i["\u0275\u0275inject"])(i.INJECTOR),Object(i["\u0275\u0275inject"])($t),Object(i["\u0275\u0275inject"])(Qt))},token:t,providedIn:"root"}),t})();class Yt{}class Kt{}class Xt{}let Zt=(()=>{class t{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class Jt{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new i.EventEmitter(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,e){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),e<this.pageCount&&(e<this.pageCount-2?this.pages.push(-1):e===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,e=this.pageCount,n=Math.floor(this.maxSize/2);return this.page<=n?e=this.maxSize:this.pageCount-this.page<n?t=this.pageCount-this.maxSize:(t=this.page-n-1,e=this.page+(this.maxSize%2==0?n-1:n)),[t,e]}_applyPagination(){let t=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[t,t+this.maxSize]}_setPageInRange(t){const e=this.page;this.page=E(t,this.pageCount,1),this.page!==e&&S(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),S(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let e=1;e<=this.pageCount;e++)this.pages.push(e);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let t=0,e=this.pageCount;[t,e]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(t,e),this._applyEllipses(t,e)}}}class te{}class ee{isTitleTemplate(){return this.title instanceof i.TemplateRef}}class ne{}let ie=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class re{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!S(t)||t<=0?100:t}get max(){return this._max}getValue(){return E(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}class se{}let ae=(()=>{class t{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class oe{constructor(t,e){this._changeDetectorRef=e,this.contexts=[],this.disabled=!1,this.hover=new i.EventEmitter,this.leave=new i.EventEmitter,this.rateChange=new i.EventEmitter(!0),this.onChange=t=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}enter(t){this.readonly||this.disabled||this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.readonly||this.disabled||this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case mt.ArrowDown:case mt.ArrowLeft:this.update(this.rate-1);break;case mt.ArrowUp:case mt.ArrowRight:this.update(this.rate+1);break;case mt.Home:this.update(0);break;case mt.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(t,e)=>({fill:0,index:e})),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,e=!0){const n=E(t,this.max,0);this.readonly||this.disabled||this.rate===n||(this.rate=n,this.rateChange.emit(this.rate)),e&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_getFillValue(t){const e=this.nextRate-t;return e>=1?100:e<1&&e>0?parseInt((100*e).toFixed(2),10):0}_updateState(t){this.nextRate=t,this.contexts.forEach((t,e)=>t.fill=this._getFillValue(e))}}class le{}let ue=(()=>{class t{constructor(){this.justify="start",this.orientation="horizontal",this.type="tabs"}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class ce{constructor(t){this.destroyOnHide=!0,this.tabChange=new i.EventEmitter,this.type=t.type,this.justify=t.justify,this.orientation=t.orientation}set justify(t){this.justifyClass="fill"===t||"justified"===t?"nav-"+t:"justify-content-"+t}select(t){let e=this._getTabById(t);if(e&&!e.disabled&&this.activeId!==e.id){let t=!1;this.tabChange.emit({activeId:this.activeId,nextId:e.id,preventDefault:()=>{t=!0}}),t||(this.activeId=e.id)}}ngAfterContentChecked(){let t=this._getTabById(this.activeId);this.activeId=t?t.id:this.tabs.length?this.tabs.first.id:null}_getTabById(t){let e=this.tabs.filter(e=>e.id===t);return e.length?e[0]:null}}class he{}class de{constructor(t,e,n){this.hour=D(t),this.minute=D(e),this.second=D(n)}changeHour(t=1){this.updateHour((isNaN(this.hour)?0:this.hour)+t)}updateHour(t){this.hour=S(t)?(t<0?24+t:t)%24:NaN}changeMinute(t=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+t)}updateMinute(t){S(t)?(this.minute=t%60<0?60+t%60:t%60,this.changeHour(Math.floor(t/60))):this.minute=NaN}changeSecond(t=1){this.updateSecond((isNaN(this.second)?0:this.second)+t)}updateSecond(t){S(t)?(this.second=t<0?60+t%60:t%60,this.changeMinute(Math.floor(t/60))):this.second=NaN}isValid(t=!0){return S(this.hour)&&S(this.minute)&&(!t||S(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let fe=(()=>{class t{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();function pe(){return new me}let ge=(()=>{class t{}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:pe,token:t,providedIn:"root"}),t})();class me extends ge{fromModel(t){return t&&j(t.hour)&&j(t.minute)?{hour:t.hour,minute:t.minute,second:j(t.second)?t.second:null}:null}toModel(t){return t&&j(t.hour)&&j(t.minute)?{hour:t.hour,minute:t.minute,second:j(t.second)?t.second:null}:null}}let ve=(()=>{class t{}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return t=Object(i["\u0275\u0275inject"])(i.LOCALE_ID),new Ae(t);var t},token:t,providedIn:"root"}),t})();class Ae extends ve{constructor(t){super(),this._periods=Object(r.getLocaleDayPeriods)(t,r.FormStyle.Standalone,r.TranslationWidth.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}const be=/[^0-9]/g;class ye{constructor(t,e,n,i){this._config=t,this._ngbTimeAdapter=e,this._cd=n,this.i18n=i,this.onChange=t=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=j(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=j(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=j(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const e=this._ngbTimeAdapter.fromModel(t);this.model=e?new de(e.hour,e.minute,e.second):new de,this.seconds||e&&S(e.second)||(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model.changeSecond(t),this.propagateModelChange()}updateHour(t){const e=this.model.hour>=12,n=D(t);this.model.updateHour(this.meridian&&(e&&n<12||!e&&12===n)?n+12:n),this.propagateModelChange()}updateMinute(t){this.model.updateMinute(D(t)),this.propagateModelChange()}updateSecond(t){this.model.updateSecond(D(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(be,"")}formatHour(t){return S(t)?T(this.meridian?t%12==0?12:t%12:t%24):T(NaN)}formatMinSec(t){return T(t)}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!S(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}class we{}let _e=(()=>{class t{constructor(){this.autohide=!0,this.delay=500,this.ariaLive="polite"}}return t.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();class ke{constructor(t,e){this.ariaLive=t,this.contentHeaderTpl=null,this.hideOutput=new i.EventEmitter,null==this.ariaLive&&(this.ariaLive=e.ariaLive),this.delay=e.delay,this.autohide=e.autohide}ngAfterContentInit(){this._init()}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout(),this.hideOutput.emit()}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}class Ie{}class Ce{}class xe{}class De{constructor(){this.highlightClass="ngb-highlight"}ngOnChanges(t){const e=O(this.result),n=(Array.isArray(this.term)?this.term:[this.term]).map(t=>O(t).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")).filter(t=>t);this.parts=n.length?e.split(new RegExp(`(${n.join("|")})`,"gmi")):[e]}}class Oe{constructor(){this.activeIdx=0,this.focusFirst=!0,this.formatter=O,this.selectEvent=new i.EventEmitter,this.activeChangeEvent=new i.EventEmitter}hasActive(){return this.activeIdx>-1&&this.activeIdx<this.results.length}getActive(){return this.results[this.activeIdx]}markActive(t){this.activeIdx=t,this._activeChanged()}next(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()}prev(){this.activeIdx<0?this.activeIdx=this.results.length-1:0===this.activeIdx?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()}resetActive(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()}select(t){this.selectEvent.emit(t)}ngOnInit(){this.resetActive()}_activeChanged(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)}}class Ee{}class Be{}},ISLE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n("SF+E"),n("curK");var i=function(){return function(){}}()},K81y:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("XNiG"),r=(n("3yoT"),n("meT2"),function(){function t(t,e){this.ng2PicaService=t,this.imageExifService=e}return t.prototype.resizeImage=function(t,e,n,r){var s=this;void 0===r&&(r=!1);var a=new i.a;if(this.timeAtStart=(new Date).getTime(),"image/jpeg"!==t.type&&"image/png"!==t.type)return setTimeout((function(){a.error({resizedFile:t,reason:"The provided File is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})}),0),a.asObservable();var o=new Image,l=this;return o.onload=function(){s.imageExifService.getOrientedImage(o).then((function(i){window.URL.revokeObjectURL(o.src);var s=i.width,u=i.height,c=s,h=u;c>e&&(c=e,h*=e/s),u=h,h>n&&(h=n,c*=n/u),h===i.height&&c===i.width?(a.next(t),l.logExecutionTime(r)):l.ng2PicaService.resize([t],c,h).subscribe((function(t){a.next(t),l.logExecutionTime(r)}),(function(e){a.error({resizedFile:t,reason:e,error:"PICA_ERROR"}),l.logExecutionTime(r)}))}))},o.src=window.URL.createObjectURL(t),a.asObservable()},t.prototype.logExecutionTime=function(t){t&&console.info("Execution time: ",(new Date).getTime()-this.timeAtStart+"ms")},t}())},Nv8m:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("DH7j"),r=n("yCtX"),s=n("l7GE"),a=n("ZUHj");function o(...t){if(1===t.length){if(!Object(i.a)(t[0]))return t[0];t=t[0]}return Object(r.a)(t,void 0).lift(new l)}class l{call(t,e){return e.subscribe(new u(t))}}class u extends s.a{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){let e=t[n],i=Object(a.a)(this,e,e,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}}notifyNext(t,e,n,i,r){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}},"SF+E":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("XNiG"),r=n("gkvR"),s=n.n(r),a=(n("curK"),function(){function t(t){this.imageExifService=t}return t.prototype.resize=function(t,e,n,r){void 0===r&&(r=!1);for(var s=new i.a,a=0;a<t.length;a++)this.resizeFile(t[a],e,n,r).then((function(t){s.next(t)})).catch((function(t){s.error(t)}));return s.asObservable()},t.prototype.resizeCanvas=function(t,e,n){return new Promise((function(i,r){var a=new s.a;a&&a.resize||(a=new window.pica),a.resize(t,e,n).then((function(t){i(t)}),(function(t){r(t)}))}))},t.prototype.resizeBuffer=function(t){return new Promise((function(e,n){var i=new s.a;i&&i.resizeBuffer||(i=new window.pica),i.resizeBuffer(t).then((function(t){e(t)}),(function(t){n(t)}))}))},t.prototype.resizeFile=function(t,e,n,i){var r=this;return void 0===i&&(i=!1),new Promise((function(s,a){var o=document.createElement("canvas"),l=o.getContext("2d"),u=new Image;u.onload=function(){r.imageExifService.getOrientedImage(u).then((function(c){window.URL.revokeObjectURL(u.src),o.width=c.width,o.height=c.height,l.drawImage(c,0,0);var h=l.getImageData(0,0,c.width,c.height);if(i){var d=Math.min(e/h.width,n/h.height);e=Math.round(h.width*d),n=Math.round(h.height*d)}var f=!0;("image/jpeg"===t.type||"image/png"===t.type&&!r.isImgUsingAlpha(h))&&(f=!1,(l=o.getContext("2d",{alpha:!1})).drawImage(c,0,0));var p=document.createElement("canvas");p.width=e,p.height=n,r.resizeCanvas(o,p,{alpha:f}).then((function(e){e.toBlob((function(e){var n=r.generateResultFile(e,t.name,t.type,(new Date).getTime());s(n)}),t.type)})).catch((function(t){a(t)}))}))},u.src=window.URL.createObjectURL(t)}))},t.prototype.isImgUsingAlpha=function(t){for(var e=0;e<t.data.length;e+=4)if(255!==t.data[e+3])return!0;return!1},t.prototype.generateResultFile=function(t,e,n,i){var r=new Blob([t],{type:n});return this.blobToFile(r,e,i)},t.prototype.blobToFile=function(t,e,n){var i=t;return i.name=e,i.lastModified=n,i},t}())},YeHE:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("XNiG"),r=(n("bfU7"),n("K81y"),n("meT2"),function(){function t(t,e,n){this.imgMaxSizeService=t,this.imgMaxPXSizeService=e,this.imageExifService=n}return t.prototype.compress=function(t,e,n,r){var s=this;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=new i.a;return t.forEach((function(t){s.compressImage(t,e,n,r).subscribe((function(t){a.next(t)}),(function(t){a.error(t)}))})),a.asObservable()},t.prototype.resize=function(t,e,n,r){var s=this;void 0===r&&(r=!1);var a=new i.a;return t.forEach((function(t){s.resizeImage(t,e,n,r).subscribe((function(t){a.next(t)}),(function(t){a.error(t)}))})),a.asObservable()},t.prototype.compressImage=function(t,e,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!1),this.imgMaxSizeService.compressImage(t,e,n,i)},t.prototype.resizeImage=function(t,e,n,i){return void 0===i&&(i=!1),this.imgMaxPXSizeService.resizeImage(t,e,n,i)},t.prototype.getEXIFOrientedImage=function(t){return this.imageExifService.getOrientedImage(t)},t}())},bfU7:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("XNiG"),r=(n("meT2"),function(){function t(t){this.imageExifService=t}return t.prototype.compressImage=function(t,e,n,r){var s=this;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=new i.a;if(this.timeAtStart=(new Date).getTime(),this.initialFile=t,"image/jpeg"!==t.type&&"image/png"!==t.type)return setTimeout((function(){a.error({compressedFile:t,reason:"File provided is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})}),0),a.asObservable();if(t.size/1024/1024<e)return setTimeout((function(){a.next(t)}),0),a.asObservable();var o=document.createElement("canvas"),l=o.getContext("2d"),u=new Image,c=this;return u.onload=function(){s.imageExifService.getOrientedImage(u).then((function(i){window.URL.revokeObjectURL(u.src),o.width=i.width,o.height=i.height,l.drawImage(i,0,0);var h=l.getImageData(0,0,i.width,i.height);"image/png"===t.type&&s.isImgUsingAlpha(h)&&!n&&a.error({compressedFile:t,reason:"File provided is a png image which uses the alpha channel. No compression possible.",error:"PNG_WITH_ALPHA"}),(l=o.getContext("2d",{alpha:!1})).drawImage(i,0,0),c.getCompressedFile(o,50,e,1).then((function(t){a.next(t),c.logExecutionTime(r)})).catch((function(t){a.error(t),c.logExecutionTime(r)}))}))},u.src=window.URL.createObjectURL(t),a.asObservable()},t.prototype.getCompressedFile=function(t,e,n,i){var r=this;return new Promise((function(s,a){t.toBlob((function(o){if(i+1>15)a({compressedFile:r.getResultFile(o),reason:"Could not find the correct compression quality in 15 steps.",error:"MAX_STEPS_EXCEEDED"});else{var l=r.getCalculatedQuality(o,e,n,i);r.checkCompressionStatus(t,o,e,n,i,l).then((function(t){s(t)})).catch((function(t){a(t)}))}}),"image/jpeg",e/100)}))},t.prototype.getResultFile=function(t){return this.generateResultFile(t,this.initialFile.name,this.initialFile.type,(new Date).getTime())},t.prototype.generateResultFile=function(t,e,n,i){var r=new Blob([t],{type:n});return this.blobToFile(r,e,i)},t.prototype.blobToFile=function(t,e,n){var i=t;return i.name=e,i.lastModified=n,i},t.prototype.getCalculatedQuality=function(t,e,n,i){var r=t.size/1024/1024,s=n/r;s>5&&(s=5);var a=r/(this.initialFile.size/1024/1024);a<.05&&(a=.05);var o=0,l=10*Math.abs(a-1)/(1.7*i)/s;return l<1&&(l=1),(o=s>=1?e+10*(s-1)*l:e-10*(1-s)*l)>100&&(o=e+(100-e)/2),o<0&&(o=e-e/2),o},t.prototype.checkCompressionStatus=function(t,e,n,i,r,s){var a=this;return new Promise((function(o,l){100===n&&s>=100?l({compressedFile:a.initialFile,reason:"Unfortunately there was an error while compressing the file.",error:"FILE_BIGGER_THAN_INITIAL_FILE"}):n<1&&s<n?l({compressedFile:a.getResultFile(e),reason:"Could not compress image enough to fit the maximal file size limit.",error:"UNABLE_TO_COMPRESS_ENOUGH"}):s>n&&Math.round(n)==Math.round(s)||r>5&&s>n&&s<n+2||s>n&&Number.isInteger(n)&&Math.floor(s)==n?o(a.getResultFile(e)):(n>s&&Math.round(n)==Math.round(s)&&(s=Math.round(s)-1),o(a.getCompressedFile(t,s,i,r+1)))}))},t.prototype.isImgUsingAlpha=function(t){for(var e=0;e<t.data.length;e+=4)if(255!==t.data[e+3])return!0;return!1},t.prototype.logExecutionTime=function(t){t&&console.info("Execution time: ",(new Date).getTime()-this.timeAtStart+"ms")},t}())},curK:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("dFej"),r=function(){function t(){}return t.prototype.getOrientedImage=function(t){return new Promise((function(e){var n;i.orientation(t).catch((function(t){})).then((function(i){if(1!=i){var r=document.createElement("canvas"),s=r.getContext("2d"),a=t.width,o=t.height,l=0,u=0,c=0;switch(i){case 3:case 4:l=-t.width,u=-t.height,c=180;break;case 5:case 6:a=t.height,o=t.width,u=-t.height,c=90;break;case 7:case 8:a=t.height,o=t.width,l=-t.width,c=270}r.width=a,r.height=o,[2,4,5,7].indexOf(i)>-1&&(s.translate(a,0),s.scale(-1,1)),s.rotate(c*Math.PI/180),s.drawImage(t,l,u),(n=document.createElement("img")).width=a,n.height=o,n.addEventListener("load",(function(){e(n)})),n.src=r.toDataURL("image/png")}else e(t)}))}))},t}()},dFej:function(t,e,n){!function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});var n=["prototype","__proto__","caller","arguments","length","name"];Object.getOwnPropertyNames(e).forEach((function(i){-1===n.indexOf(i)&&t[i]!==e[i]&&(t[i]=e[i])})),e&&o(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,n){return(u=l()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return u(t,arguments,a(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?h(t):e}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}var p=Object.values||function(t){var e=[];for(var n in t)e.push(t[n]);return e},g=Object.entries||function(t){var e=[];for(var n in t)e.push([n,t[n]]);return e},m=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach((function(e){for(var n in e)t[n]=e[n]})),t},v=Object.fromEntries||function(t){var e={};return A(t).forEach((function(t){e[t[0]]=t[1]})),e},A=Array.from||function(t){if(t instanceof I){var e=[];return t.forEach((function(t,n){return e.push([n,t])})),e}return Array.prototype.slice.call(t)};function b(t){return-1!==this.indexOf(t)}Array.prototype.includes||(Array.prototype.includes=b),String.prototype.includes||(String.prototype.includes=b),String.prototype.startsWith||(String.prototype.startsWith=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.substring(e,e+t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this.substring(e-t.length,e)===t});var y="undefined"!=typeof self?self:global,w=y.fetch||function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){var r=new XMLHttpRequest;if(r.open("get",t,!0),r.responseType="arraybuffer",r.onerror=i,e.headers)for(var s in e.headers)r.setRequestHeader(s,e.headers[s]);r.onload=function(){n({ok:r.status>=200&&r.status<300,status:r.status,arrayBuffer:function(){return Promise.resolve(r.response)}})},r.send(null)}))},_=function(t){var e=[];if(Object.defineProperties(e,{size:{get:function(){return this.length}},has:{value:function(t){return-1!==this.indexOf(t)}},add:{value:function(t){this.has(t)||this.push(t)}},delete:{value:function(t){if(this.has(t)){var e=this.indexOf(t);this.splice(e,1)}}}}),Array.isArray(t))for(var n=0;n<t.length;n++)e.add(t[n]);return e},k=function(t){return new I(t)},I=void 0!==y.Map&&void 0!==y.Map.prototype.keys?y.Map:function(){function t(n){if(e(this,t),this.clear(),n)for(var i=0;i<n.length;i++)this.set(n[i][0],n[i][1])}return i(t,[{key:"clear",value:function(){this._map={},this._keys=[]}},{key:"get",value:function(t){return this._map["map_"+t]}},{key:"set",value:function(t,e){return this._map["map_"+t]=e,this._keys.indexOf(t)<0&&this._keys.push(t),this}},{key:"has",value:function(t){return this._keys.indexOf(t)>=0}},{key:"delete",value:function(t){var e=this._keys.indexOf(t);return!(e<0||(delete this._map["map_"+t],this._keys.splice(e,1),0))}},{key:"keys",value:function(){return this._keys.slice(0)}},{key:"values",value:function(){var t=this;return this._keys.map((function(e){return t.get(e)}))}},{key:"entries",value:function(){var t=this;return this._keys.map((function(e){return[e,t.get(e)]}))}},{key:"forEach",value:function(t,e){for(var n=0;n<this._keys.length;n++)t.call(e,this._map["map_"+this._keys[n]],this._keys[n],this)}},{key:"size",get:function(){return this._keys.length}}]),t}(),C="undefined"!=typeof self?self:global,x="undefined"!=typeof navigator,D=x&&"undefined"==typeof HTMLImageElement,O=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),E=C.Buffer,B=C.BigInt,S=!!E,j=function(t){return void 0!==t};function R(t){return void 0===t||(t instanceof I?0===t.size:0===p(t).filter(j).length)}function T(t){var e=new Error(t);return delete e.stack,e}function M(t){var e=function(t){var e=0;return t.ifd0.enabled&&(e+=1024),t.exif.enabled&&(e+=2048),t.makerNote&&(e+=2048),t.userComment&&(e+=1024),t.gps.enabled&&(e+=512),t.interop.enabled&&(e+=100),t.ifd1.enabled&&(e+=1024),e+2048}(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}var F="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function P(t){return F?F.decode(t):S?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(String.fromCharCode.apply(null,t)))}var Q=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(e(this,t),"boolean"==typeof s&&(this.le=s),Array.isArray(n)&&(n=new Uint8Array(n)),0===n)this.byteOffset=0,this.byteLength=0;else if(n instanceof ArrayBuffer){void 0===r&&(r=n.byteLength-i);var a=new DataView(n,i,r);this._swapDataView(a)}else if(n instanceof Uint8Array||n instanceof DataView||n instanceof t){if(void 0===r&&(r=n.byteLength-i),(i+=n.byteOffset)+r>n.byteOffset+n.byteLength)throw T("Creating view outside of available memory in ArrayBuffer");var o=new DataView(n.buffer,i,r);this._swapDataView(o)}else{if("number"!=typeof n)throw T("Invalid input argument for BufferView: "+n);var l=new DataView(new ArrayBuffer(n));this._swapDataView(l)}}return i(t,null,[{key:"from",value:function(e,n){return e instanceof this&&e.le===n?e:new t(e,void 0,void 0,n)}}]),i(t,[{key:"_swapArrayBuffer",value:function(t){this._swapDataView(new DataView(t))}},{key:"_swapBuffer",value:function(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}},{key:"_swapDataView",value:function(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}},{key:"_lengthToEnd",value:function(t){return this.byteLength-t}},{key:"set",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;if(e instanceof DataView||e instanceof t?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),!(e instanceof Uint8Array))throw T("BufferView.set(): Invalid data argument.");var r=this.toUint8();return r.set(e,n),new i(this,n,e.byteLength)}},{key:"subarray",value:function(e,n){return new t(this,e,n=n||this._lengthToEnd(e))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(t,e){return new Uint8Array(this.buffer,this.byteOffset+t,e)}},{key:"getString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=this.getUint8Array(t,e);return P(n)}},{key:"getUnicodeString",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=[],i=0;i<e&&t+i<this.byteLength;i+=2)n.push(this.getUint16(t+i));return n.map((function(t){return String.fromCharCode(t)})).join("")}},{key:"getInt8",value:function(t){return this.dataView.getInt8(t)}},{key:"getUint8",value:function(t){return this.dataView.getUint8(t)}},{key:"getInt16",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(t,e)}},{key:"getInt32",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(t,e)}},{key:"getUint16",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(t,e)}},{key:"getUint32",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(t,e)}},{key:"getFloat32",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(t,e)}},{key:"getFloat64",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(t,e)}},{key:"getFloat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(t,e)}},{key:"getDouble",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(t,e)}},{key:"getUint64",value:function(t){var e=this.getUint32(t),n=this.getUint32(t+4);if(e<1048575)return e<<32|n;if(void 0!==typeof B)return console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),B(e)<<B(32)|B(n);throw T("Trying to read 64b value but JS can only handle 53b numbers.")}},{key:"getUintBytes",value:function(t,e,n){switch(e){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64(t,n)}}},{key:"getUint",value:function(t,e,n){switch(e){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64(t,n)}}},{key:"toString",value:function(t){return this.dataView.toString(t,this.constructor.name)}},{key:"ensureChunk",value:function(){}}]),t}();function N(t,e){throw T("".concat(t," '").concat(e,"' was not loaded, try using full build of exifr."))}var U=function(t){function n(t){var i;return e(this,n),(i=d(this,a(n).call(this))).kind=t,i}return s(n,t),i(n,[{key:"get",value:function(t,e){return this.has(t)||N(this.kind,t),e&&(t in e||function(t,e){throw T("Unknown ".concat(t," '").concat(e,"'."))}(this.kind,t),e[t].enabled||N(this.kind,t)),f(a(n.prototype),"get",this).call(this,t)}},{key:"keyList",value:function(){return A(this.keys())}}]),n}(c(I)),V=new U("file parser"),z=new U("segment parser"),L=new U("file reader");function W(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function H(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}var G=W((function(t){return new Promise((function(e,n){var i=new FileReader;i.onloadend=function(){return e(i.result||new ArrayBuffer)},i.onerror=n,i.readAsArrayBuffer(t)}))})),$=W((function(t){return w(t).then((function(t){return t.arrayBuffer()}))})),q=W((function(t,e){return H(e(t),(function(t){return new Q(t)}))})),Y=W((function(t,e,n){var i=new(L.get(n))(t,e);return H(i.read(),(function(){return i}))})),K=W((function(t,e,n,i){if(L.has(n))return Y(t,e,n);if(i)return q(t,i);throw T("Parser ".concat(n," is not loaded"))}));function X(t,e){if((n=t).startsWith("data:")||n.length>1e4)return Y(t,e,"base64");if(x)return K(t,e,"url",$);if(O)return Y(t,e,"fs");throw T("Invalid input argument");var n}var Z=function(t){function n(){return e(this,n),d(this,a(n).apply(this,arguments))}return s(n,t),i(n,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=A(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=A(this.values())),this.allValues}}]),n}(c(I));function J(t,e,n){var i=new Z,r=n;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var s=0;s<r.length;s++){var a=r[s];i.set(a[0],a[1])}if(Array.isArray(e)){var o=e;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=A(o));for(var l=0;l<o.length;l++)t.set(o[l],i)}else t.set(e,i);return i}function tt(t,e,n){var i,r=t.get(e),s=n;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=A(s));for(var a=0;a<s.length;a++)r.set((i=s[a])[0],i[1])}var et=k(),nt=k(),it=k(),rt=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],st=["jfif","xmp","icc","iptc"],at=["tiff"].concat(st),ot=["ifd0","ifd1","exif","gps","interop"],lt=[].concat(at,ot),ut=["makerNote","userComment"],ct=["translateKeys","translateValues","reviveValues","multiSegment"],ht=[].concat(ct,["sanitize","mergeOutput"]),dt=function(){function t(){e(this,t)}return i(t,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),t}(),ft=function(t){function n(t,i,s,o){var l;if(e(this,n),r(h(l=d(this,a(n).call(this))),"enabled",!1),r(h(l),"skip",_()),r(h(l),"pick",_()),r(h(l),"deps",_()),r(h(l),"translateKeys",!1),r(h(l),"translateValues",!1),r(h(l),"reviveValues",!1),l.key=t,l.enabled=i,l.parse=l.enabled,l.applyInheritables(o),l.canBeFiltered=ot.includes(t),l.canBeFiltered&&(l.dict=et.get(t)),void 0!==s)if(Array.isArray(s))l.parse=l.enabled=!0,l.canBeFiltered&&s.length>0&&l.translateTagSet(s,l.pick);else if("object"==typeof s){if(l.enabled=!0,l.parse=!1!==s.parse,l.canBeFiltered){var u=s.pick,c=s.skip;u&&u.length>0&&l.translateTagSet(u,l.pick),c&&c.length>0&&l.translateTagSet(c,l.skip)}l.applyInheritables(s)}else{if(!0!==s&&!1!==s)throw T("Invalid options argument: ".concat(s));l.parse=l.enabled=s}return l}return s(n,t),i(n,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}}]),i(n,[{key:"applyInheritables",value:function(t){var e,n,i=ct;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var r=0;r<i.length;r++)void 0!==(n=t[e=i[r]])&&(this[e]=n)}},{key:"translateTagSet",value:function(t,e){if(this.dict){var n,i,r=this.dict,s=r.tagKeys,a=r.tagValues,o=t;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=A(o));for(var l=0;l<o.length;l++)"string"==typeof(n=o[l])?(-1===(i=a.indexOf(n))&&(i=s.indexOf(Number(n))),-1!==i&&e.add(Number(s[i]))):e.add(n)}else{var u=t;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=A(u));for(var c=0;c<u.length;c++)e.add(u[c])}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,bt(this.pick,this.deps)):this.enabled&&this.pick.size>0&&bt(this.pick,this.deps)}}]),n}(dt),pt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},gt=k(),mt=function(t){function n(t){var i;if(e(this,n),i=d(this,a(n).call(this)),!0===t)i.setupFromTrue();else if(void 0===t)i.setupFromUndefined();else if(Array.isArray(t))i.setupFromArray(t);else{if("object"!=typeof t)throw T("Invalid options argument ".concat(t));i.setupFromObject(t)}return void 0===i.firstChunkSize&&(i.firstChunkSize=x?i.firstChunkSizeBrowser:i.firstChunkSizeNode),i.mergeOutput&&(i.ifd1.enabled=!1),i.filterNestedSegmentTags(),i.traverseTiffDependencyTree(),i.checkLoadedPlugins(),i}return s(n,t),i(n,null,[{key:"useCached",value:function(t){var e=gt.get(t);return void 0!==e||(e=new this(t),gt.set(t,e)),e}}]),i(n,[{key:"setupFromUndefined",value:function(){var t,e=rt;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=A(e));for(var n=0;n<e.length;n++)this[t=e[n]]=pt[t];var i=ht;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var r=0;r<i.length;r++)this[t=i[r]]=pt[t];var s=ut;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=A(s));for(var a=0;a<s.length;a++)this[t=s[a]]=pt[t];var o=lt;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=A(o));for(var l=0;l<o.length;l++)this[t=o[l]]=new ft(t,pt[t],void 0,this)}},{key:"setupFromTrue",value:function(){var t,e=rt;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=A(e));for(var n=0;n<e.length;n++)this[t=e[n]]=pt[t];var i=ht;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var r=0;r<i.length;r++)this[t=i[r]]=pt[t];var s=ut;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=A(s));for(var a=0;a<s.length;a++)this[t=s[a]]=!0;var o=lt;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=A(o));for(var l=0;l<o.length;l++)this[t=o[l]]=new ft(t,!0,void 0,this)}},{key:"setupFromArray",value:function(t){var e,n=rt;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var i=0;i<n.length;i++)this[e=n[i]]=pt[e];var r=ht;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var s=0;s<r.length;s++)this[e=r[s]]=pt[e];var a=ut;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=A(a));for(var o=0;o<a.length;o++)this[e=a[o]]=pt[e];var l=lt;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=A(l));for(var u=0;u<l.length;u++)this[e=l[u]]=new ft(e,!1,void 0,this);this.setupGlobalFilters(t,void 0,ot)}},{key:"setupFromObject",value:function(t){var e;ot.ifd0=ot.ifd0||ot.image,ot.ifd1=ot.ifd1||ot.thumbnail,m(this,t);var n=rt;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var i=0;i<n.length;i++)this[e=n[i]]=At(t[e],pt[e]);var r=ht;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var s=0;s<r.length;s++)this[e=r[s]]=At(t[e],pt[e]);var a=ut;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=A(a));for(var o=0;o<a.length;o++)this[e=a[o]]=At(t[e],pt[e]);var l=at;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=A(l));for(var u=0;u<l.length;u++)this[e=l[u]]=new ft(e,pt[e],t[e],this);var c=ot;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=A(c));for(var h=0;h<c.length;h++)this[e=c[h]]=new ft(e,pt[e],t[e],this.tiff);this.setupGlobalFilters(t.pick,t.skip,ot,lt),!0===t.tiff?this.batchEnableWithBool(ot,!0):!1===t.tiff?this.batchEnableWithUserValue(ot,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,ot):"object"==typeof t.tiff&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,ot)}},{key:"batchEnableWithBool",value:function(t,e){var n=t;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var i=0;i<n.length;i++)this[n[i]].enabled=e}},{key:"batchEnableWithUserValue",value:function(t,e){var n=t;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var i=0;i<n.length;i++){var r=n[i],s=e[r];this[r].enabled=!1!==s&&void 0!==s}}},{key:"setupGlobalFilters",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(t&&t.length){var r=i;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var s=0;s<r.length;s++){var a=r[s];this[a].enabled=!1}var o=vt(t,n),l=o;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=A(l));for(var u=0;u<l.length;u++){var c=l[u],h=c[0],d=c[1];bt(this[h].pick,d),this[h].enabled=!0}}else if(e&&e.length){var f=vt(e,n),p=f;Array.isArray(p)||("function"==typeof p.entries&&(p=p.entries()),p=A(p));for(var g=0;g<p.length;g++){var m=p[g],v=m[0],b=m[1];bt(this[v].skip,b)}}}},{key:"filterNestedSegmentTags",value:function(){var t=this.ifd0,e=this.exif,n=this.xmp,i=this.iptc,r=this.icc;this.makerNote?e.deps.add(37500):e.skip.add(37500),this.userComment?e.deps.add(37510):e.skip.add(37510),n.enabled||t.skip.add(700),i.enabled||t.skip.add(33723),r.enabled||t.skip.add(34675)}},{key:"traverseTiffDependencyTree",value:function(){var t=this,e=this.ifd0,n=this.exif,i=this.gps;this.interop.needed&&(n.deps.add(40965),e.deps.add(40965)),n.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=ot.some((function(e){return!0===t[e].enabled}))||this.makerNote||this.userComment;var r=ot;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var s=0;s<r.length;s++)this[r[s]].finalizeFilters()}},{key:"checkLoadedPlugins",value:function(){var t=at;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=A(t));for(var e=0;e<t.length;e++){var n=t[e];this[n].enabled&&!z.has(n)&&N("segment parser",n)}}},{key:"onlyTiff",get:function(){var t=this;return!st.map((function(e){return t[e].enabled})).some((function(t){return!0===t}))&&this.tiff.enabled}}]),n}(dt);function vt(t,e){var n,i,r,s=[],a=e;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=A(a));for(var o=0;o<a.length;o++){n=[];var l=et.get(i=a[o]);Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=A(l));for(var u=0;u<l.length;u++)(t.includes((r=l[u])[0])||t.includes(r[1]))&&n.push(r[0]);n.length&&s.push([i,n])}return s}function At(t,e){return void 0!==t?t:void 0!==e?e:void 0}function bt(t,e){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var i=0;i<n.length;i++)t.add(n[i])}r(mt,"default",pt);var yt={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},wt=m({},yt,{firstChunkSize:4e4,gps:[1,2,3,4]}),_t=m({},yt,{firstChunkSize:4e4,ifd0:[274]}),kt=m({},yt,{tiff:!1,ifd1:!0,mergeOutput:!1});function It(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function Ct(t,e){var n=t();return n&&n.then?n.then(e):e(n)}function xt(){}var Dt=function(){function t(n){e(this,t),r(this,"parsers",{}),this.options=mt.useCached(n)}return i(t,[{key:"setup",value:function(){if(!this.fileParser){var t,e=this.file.getUint16(0);if(18761===e||19789===e)this.file.isTiff=!0,t=V.get("tiff");else if(65496===e)this.file.isJpeg=!0,t=V.get("jpeg");else{if(!function(t){if(0!==t.getUint16(0))return!1;var e=t.getUint16(2);if(e>50)return!1;for(var n=16,i=[];n<e;)i.push(t.getString(n,4)),n+=4;return i.includes("heic")}(this.file))throw T("Unknown file format");this.file.isHeic=!0,t=V.get("heic")}this.fileParser=new t(this.options,this.file,this.parsers)}}},{key:"read",value:function(t){try{var e=this;return It(function(t,e){if("string"==typeof t)return X(t,e);if(x&&!D&&t instanceof HTMLImageElement)return X(t.src,e);if(t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView)return new Q(t);if(x&&t instanceof Blob)return K(t,e,"blob",G);throw T("Invalid input argument")}(t,e.options),(function(t){e.file=t}))}catch(t){return Promise.reject(t)}}},{key:"parse",value:function(){try{var t=this;return t.setup(),It(t.fileParser.parse(),(function(){var e,n={},i=[],r=p(t.parsers).map((e=function(e){var r;return Ct((function(){return t.options.silentErrors?(s=function(){e.errors.length&&i.push.apply(i,e.errors)},(n=function(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}((function(){return It(e.parse(),(function(t){r=t}))}),(function(t){i.push(t)})))&&n.then?n.then(s):s()):It(e.parse(),(function(t){r=t}));var n,s}),(function(){e.assignToOutput(n,r)}))},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(t){return Promise.reject(t)}}));return It(Promise.all(r),(function(){var e;return t.options.silentErrors&&i.length>0&&(n.errors=i),n=R(e=n)?void 0:e,t.file.close&&t.file.close(),n}))}))}catch(t){return Promise.reject(t)}}},{key:"extractThumbnail",value:function(){try{var t=this;t.setup();var e,n=z.get("tiff",t.options);return Ct((function(){if(!t.file.isTiff)return function(t){var e=t();if(e&&e.then)return e.then(xt)}((function(){if(t.file.isJpeg)return It(t.fileParser.getOrFindSegment("tiff"),(function(t){e=t}))}));e={start:0,type:"tiff"}}),(function(){if(void 0!==e)return It(t.fileParser.ensureSegmentChunk(e),(function(e){return It((t.parsers.tiff=new n(e,t.options,t.file)).extractThumbnail(),(function(e){return t.file.close&&t.file.close(),e}))}))}))}catch(t){return Promise.reject(t)}}}]),t}();function Ot(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function Et(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}var Bt=Et((function(t){var e=new Dt(_t);return Ot(e.read(t),(function(){return Ot(e.parse(),(function(t){if(t&&t.ifd0)return t.ifd0[274]}))}))})),St=Et((function(t){var e=new Dt(wt);return Ot(e.read(t),(function(){return Ot(e.parse(),(function(t){if(t&&t.gps){var e=t.gps;return{latitude:e.latitude,longitude:e.longitude}}}))}))})),jt=Et((function(t){return Ot(this.thumbnail(t),(function(t){if(void 0!==t){var e=new Blob([t]);return URL.createObjectURL(e)}}))})),Rt=Et((function(t){var e=new Dt(kt);return Ot(e.read(t),(function(){return Ot(e.extractThumbnail(),(function(t){return t&&S?E.from(t):t}))}))})),Tt=Et((function(t,e){var n=new Dt(e);return Ot(n.read(t),(function(){return n.parse()}))})),Mt=Object.freeze({__proto__:null,orientation:Bt,gps:St,thumbnailUrl:jt,thumbnail:Rt,parse:Tt,Exifr:Dt,fileParsers:V,segmentParsers:z,fileReaders:L,tagKeys:et,tagValues:nt,tagRevivers:it,createDictionary:J,extendDictionary:tt,fetchUrlAsArrayBuffer:$,readBlobAsArrayBuffer:G,chunkedProps:rt,otherSegments:st,segments:at,tiffBlocks:ot,segmentsAndBlocks:lt,tiffExtractables:ut,inheritables:ct,allFormatters:ht,Options:mt,disableAllOptions:yt,gpsOnlyOptions:wt,orientationOnlyOptions:_t,thumbnailOnlyOptions:kt});function Ft(){}var Pt=function(t){function n(){var t,i;e(this,n);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r(h(i=d(this,(t=a(n)).call.apply(t,[this].concat(o)))),"ranges",new Qt),0!==i.byteLength&&i.ranges.add(0,i.byteLength),i}return s(n,t),i(n,[{key:"_tryExtend",value:function(t,e,n){if(0===t&&0===this.byteLength&&n){var i=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(i)}else{var r=t+e;if(r>this.byteLength){var s=this._extend(r).dataView;this._swapDataView(s)}}}},{key:"_extend",value:function(t){var e;e=S?E.allocUnsafe(t):new Uint8Array(t);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return e.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:e,dataView:n}}},{key:"subarray",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=e||this._lengthToEnd(t),i&&this._tryExtend(t,e),this.ranges.add(t,e),f(a(n.prototype),"subarray",this).call(this,t,e)}},{key:"set",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&this._tryExtend(e,t.byteLength,t);var r=f(a(n.prototype),"set",this).call(this,t,e);return this.ranges.add(e,r.byteLength),r}},{key:"ensureChunk",value:function(t,e){try{if(!this.chunked)return;if(this.ranges.available(t,e))return;return function(t,e){return t&&t.then?t.then(Ft):Promise.resolve()}(this.readChunk(t,e))}catch(t){return Promise.reject(t)}}},{key:"available",value:function(t,e){return this.ranges.available(t,e)}}]),n}(Q),Qt=function(){function t(){e(this,t),r(this,"list",[])}return i(t,[{key:"add",value:function(t,e){var n=t+e,i=this.list.filter((function(e){return Nt(t,e.offset,n)||Nt(t,e.end,n)}));if(i.length>0){t=Math.min.apply(Math,[t].concat(i.map((function(t){return t.offset})))),e=(n=Math.max.apply(Math,[n].concat(i.map((function(t){return t.end})))))-t;var r=i.shift();r.offset=t,r.length=e,r.end=n,this.list=this.list.filter((function(t){return!i.includes(t)}))}else this.list.push({offset:t,length:e,end:n})}},{key:"available",value:function(t,e){var n=t+e;return this.list.some((function(e){return e.offset<=t&&n<=e.end}))}},{key:"length",get:function(){return this.list.length}}]),t}();function Nt(t,e,n){return t<=e&&e<=n}function Ut(){}function Vt(t,e){if(!e)return t&&t.then?t.then(Ut):Promise.resolve()}function zt(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}var Lt=function(t){function n(){return e(this,n),d(this,a(n).apply(this,arguments))}return s(n,t),i(n,[{key:"readWhole",value:function(){try{var t=this;return t.chunked=!1,zt(G(t.input),(function(e){t._swapArrayBuffer(e)}))}catch(t){return Promise.reject(t)}}},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,f(a(n.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(t,e){try{var n=this,i=n.input.slice(t,e?t+e:void 0);return zt(G(i),(function(e){return n.set(e,t,!0)}))}catch(t){return Promise.reject(t)}}}]),n}(function(t){function n(t,i){var s;return e(this,n),r(h(s=d(this,a(n).call(this,0))),"chunksRead",0),s.input=t,s.options=i,s}return s(n,t),i(n,[{key:"readWhole",value:function(){try{return this.chunked=!1,Vt(this.readChunk(this.nextChunkOffset))}catch(t){return Promise.reject(t)}}},{key:"readChunked",value:function(){try{return this.chunked=!0,Vt(this.readChunk(0,this.options.firstChunkSize))}catch(t){return Promise.reject(t)}}},{key:"readNextChunk",value:function(t){try{if(void 0===t&&(t=this.nextChunkOffset),this.fullyRead)return this.chunksRead++,!1;var e=this.options.chunkSize;return n=this.readChunk(t,e),i=function(t){return!!t&&t.byteLength===e},n&&n.then||(n=Promise.resolve(n)),i?n.then(i):n}catch(t){return Promise.reject(t)}var n,i}},{key:"readChunk",value:function(t,e){try{if(this.chunksRead++,0===(e=this.safeWrapAddress(t,e)))return;return this._readChunk(t,e)}catch(t){return Promise.reject(t)}}},{key:"safeWrapAddress",value:function(t,e){return void 0!==this.size&&t+e>this.size?Math.max(0,this.size-t):e}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}},{key:"nextChunkOffset",get:function(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return void 0!==this.size&&this.nextChunkOffset===this.size}}]),n}(Pt));L.set("blob",Lt);var Wt=function(){function t(n,i,s){var a,o=this;e(this,t),r(this,"ensureSegmentChunk",(a=function(t){var e,n,i,r=t.start,s=t.size||65536;return e=function(){if(o.file.chunked)return function(){if(!o.file.available(r,s))return function(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}((function(){return n=function(e){t.chunk=e},(e=o.file.readChunk(r,s))&&e.then||(e=Promise.resolve(e)),n?e.then(n):e;var e,n}),(function(e){throw T("Couldn't read segment: ".concat(JSON.stringify(t),". ").concat(e.message))}));t.chunk=o.file.subarray(r,s)}();if(o.file.byteLength>r+s)t.chunk=o.file.subarray(r,s);else{if(void 0!==t.size)throw T("Segment unreachable: "+JSON.stringify(t));t.chunk=o.file.subarray(r)}},n=function(e){return t.chunk},(i=e())&&i.then?i.then(n):n()},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(a.apply(this,t))}catch(t){return Promise.reject(t)}})),this.extendOptions&&this.extendOptions(n),this.options=n,this.file=i,this.parsers=s}return i(t,[{key:"createParser",value:function(t,e){var n=new(z.get(t))(e,this.options,this.file);return this.parsers[t]=n}}]),t}(),Ht=function(){function t(n){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;e(this,t),r(this,"errors",[]),r(this,"raw",k()),r(this,"handleError",(function(t){if(!i.options.silentErrors)throw t;i.errors.push(t.message)})),this.chunk=this.normalizeInput(n),this.file=a,this.type=this.constructor.type,this.globalOptions=this.options=s,this.localOptions=s[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return i(t,[{key:"normalizeInput",value:function(t){return t instanceof Q?t:new Q(t)}}],[{key:"findPosition",value:function(t,e){var n=t.getUint16(e+2)+2,i="function"==typeof this.headerLength?this.headerLength(t,e,n):this.headerLength,r=e+i,s=n-i;return{offset:e,length:n,headerLength:i,start:r,size:s,end:r+s}}},{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new mt(r({},this.type,e)),i=new this(t,n);return i.parse()}}]),i(t,[{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"translateBlock",value:function(t,e){var n=it.get(e),i=nt.get(e),r=et.get(e),s=this.options[e],a=s.reviveValues&&!!n,o=s.translateValues&&!!i,l=s.translateKeys&&!!r,u={},c=t;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=A(c));for(var h=0;h<c.length;h++){var d=c[h],f=d[0],p=d[1];a&&n.has(f)?p=n.get(f)(p):o&&i.has(f)&&(p=this.translateValue(p,i.get(f))),l&&r.has(f)&&(f=r.get(f)||f),u[f]=p}return u}},{key:"translateValue",value:function(t,e){return e[t]||t}},{key:"assignToOutput",value:function(t,e){this.assignObjectToOutput(t,this.constructor.type,e)}},{key:"assignObjectToOutput",value:function(t,e,n){if(this.globalOptions.mergeOutput)return m(t,n);t[e]?m(t[e],n):t[e]=n}},{key:"output",get:function(){return this.translated?this.translated:this.raw?v(this.raw):void 0}}]),t}();function Gt(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function $t(){}function qt(t,e){if(!e)return t&&t.then?t.then($t):Promise.resolve()}function Yt(t){var e=t();if(e&&e.then)return e.then($t)}function Kt(t,e){var n=t();return n&&n.then?n.then(e):e(n)}function Xt(t,e,n){if(!t.s){if(n instanceof Zt){if(!n.s)return void(n.o=Xt.bind(null,t,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)return void n.then(Xt.bind(null,t,e),Xt.bind(null,t,2));t.s=e,t.v=n;var i=t.o;i&&i(t)}}r(Ht,"headerLength",4),r(Ht,"type",void 0),r(Ht,"multiSegment",!1),r(Ht,"canHandle",(function(){return!1}));var Zt=function(){function t(){}return t.prototype.then=function(e,n){var i=new t,r=this.s;if(r){var s=1&r?e:n;if(s){try{Xt(i,1,s(this.v))}catch(t){Xt(i,2,t)}return i}return this}return this.o=function(t){try{var r=t.v;1&t.s?Xt(i,1,e?e(r):r):n?Xt(i,1,n(r)):Xt(i,2,r)}catch(t){Xt(i,2,t)}},i},t}();function Jt(t){return t instanceof Zt&&1&t.s}function te(t,e,n){for(var i;;){var r=t();if(Jt(r)&&(r=r.v),!r)return s;if(r.then){i=0;break}var s=n();if(s&&s.then){if(!Jt(s)){i=1;break}s=s.s}if(e){var a=e();if(a&&a.then&&!Jt(a)){i=2;break}}}var o=new Zt,l=Xt.bind(null,o,2);return(0===i?r.then(c):1===i?s.then(u):a.then(h)).then(void 0,l),o;function u(i){s=i;do{if(e&&(a=e())&&a.then&&!Jt(a))return void a.then(h).then(void 0,l);if(!(r=t())||Jt(r)&&!r.v)return void Xt(o,1,s);if(r.then)return void r.then(c).then(void 0,l);Jt(s=n())&&(s=s.v)}while(!s||!s.then);s.then(u).then(void 0,l)}function c(t){t?(s=n())&&s.then?s.then(u).then(void 0,l):u(s):Xt(o,1,s)}function h(){(r=t())?r.then?r.then(c).then(void 0,l):c(r):Xt(o,1,s)}}function ee(t){return 192===t||194===t||196===t||219===t||221===t||218===t||254===t}function ne(t){return t>=224&&t<=239}function ie(t,e){var n=z;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var i=0;i<n.length;i++){var r=n[i],s=r[0];if(r[1].canHandle(t,e))return s}}var re=function(t){function n(){var t,i;e(this,n);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r(h(i=d(this,(t=a(n)).call.apply(t,[this].concat(o)))),"appSegments",[]),r(h(i),"jpegSegments",[]),r(h(i),"unknownSegments",[]),i}return s(n,t),i(n,[{key:"parse",value:function(){try{var t=this;return Gt(t.findAppSegments(),(function(){return Gt(t.readSegments(),(function(){t.mergeMultiSegments(),t.createParsers()}))}))}catch(t){return Promise.reject(t)}}},{key:"readSegments",value:function(){try{var t=this.appSegments.map(this.ensureSegmentChunk);return qt(Promise.all(t))}catch(t){return Promise.reject(t)}}},{key:"setupSegmentFinderArgs",value:function(t){var e=this;!0===t?(this.findAll=!0,this.wanted=_(z.keyList())):(t=void 0===t?z.keyList().filter((function(t){return e.options[t].enabled})):t.filter((function(t){return e.options[t].enabled&&z.has(t)})),this.findAll=!1,this.remaining=_(t),this.wanted=_(t)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;try{var n=this;n.setupSegmentFinderArgs(e);var i=n.file,r=n.findAll,s=n.wanted,a=n.remaining;return Kt((function(){if(!r&&n.file.chunked)return r=A(s).some((function(t){return z.get(t).multiSegment&&n.options[t].multiSegment})),Yt((function(){if(r)return qt(n.file.readWhole())}))}),(function(){var e=!1;if(t=n._findAppSegments(t,i.byteLength,r,s,a),!n.options.onlyTiff)return function(){if(i.chunked){var r=!1;return te((function(){return!e&&a.size>0&&!r&&(!!i.canReadNextChunk||!!n.unfinishedMultiSegment)}),void 0,(function(){var s=i.nextChunkOffset,a=n.appSegments.some((function(t){return!n.file.available(t.offset||t.start,t.length||t.size)}));return Kt((function(){return Gt(i.readNextChunk(t>s&&!a?t:s),(function(t){r=!t}))}),(function(){void 0===(t=n._findAppSegments(t,i.byteLength))&&(e=!0)}))}))}}()}))}catch(t){return Promise.reject(t)}}},{key:"_findAppSegments",value:function(t,e){for(var n,i,r,s,a,o,l=this.file,u=this.findAll,c=this.wanted,h=this.remaining,d=this.options;t<e;t++)if(255===l.getUint8(t))if(ne(n=l.getUint8(t+1))){if(i=l.getUint16(t+2),(r=ie(l,t))&&c.has(r)&&(a=(s=z.get(r)).findPosition(l,t),o=d[r],a.type=r,this.appSegments.push(a),!u&&(s.multiSegment&&o.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||h.delete(r)):h.delete(r),0===h.size)))break;d.recordUnknownSegments&&((a=Ht.findPosition(l,t)).marker=n,this.unknownSegments.push(a)),t+=i+1}else if(ee(n)){if(i=l.getUint16(t+2),218===n&&!1!==d.stopAfterSos)return;d.recordJpegSegments&&this.jpegSegments.push({offset:t,length:i,marker:n}),t+=i+1}return t}},{key:"mergeMultiSegments",value:function(){var t=this;if(this.appSegments.some((function(t){return t.multiSegment}))){var e=function(t,e){for(var n,i,r,s=k(),a=0;a<t.length;a++)s.has(i=(n=t[a]).type)?r=s.get(i):s.set(i,r=[]),r.push(n);return A(s)}(this.appSegments);this.mergedAppSegments=e.map((function(e){var n=e[0],i=e[1],r=z.get(n,t.options);return r.handleMultiSegments?{type:n,chunk:r.handleMultiSegments(i)}:i[0]}))}}},{key:"createParsers",value:function(){try{var t=this.mergedAppSegments||this.appSegments;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=A(t));for(var e=0;e<t.length;e++){var n=t[e],i=n.type,r=n.chunk;if(this.options[i].enabled){var s=this.parsers[i];if(s&&s.append);else if(!s){var a=new(z.get(i,this.options))(r,this.options,this.file);this.parsers[i]=a}}}return Gt()}catch(t){return Promise.reject(t)}}},{key:"getSegment",value:function(t){return this.appSegments.find((function(e){return e.type===t}))}},{key:"getOrFindSegment",value:function(t){try{var e=this,n=e.getSegment(t);return Kt((function(){if(void 0===n)return Gt(e.findAppSegments(0,[t]),(function(){n=e.getSegment(t)}))}),(function(){return n}))}catch(t){return Promise.reject(t)}}}]),n}(Wt);function se(){}function ae(t,e){if(!e)return t&&t.then?t.then(se):Promise.resolve()}function oe(t,e){var n=t();return n&&n.then?n.then(e):e(n)}V.set("jpeg",re);var le=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],ue=function(t){function n(){return e(this,n),d(this,a(n).apply(this,arguments))}return s(n,t),i(n,[{key:"parse",value:function(){try{var t=this;return t.parseHeader(),oe((function(){if(t.options.ifd0.enabled)return ae(t.parseIfd0Block())}),(function(){return oe((function(){if(t.options.exif.enabled)return ae(t.saveParseBlock("parseExifBlock"))}),(function(){return oe((function(){if(t.options.gps.enabled)return ae(t.saveParseBlock("parseGpsBlock"))}),(function(){return oe((function(){if(t.options.interop.enabled)return ae(t.saveParseBlock("parseInteropBlock"))}),(function(){return oe((function(){if(t.options.ifd1.enabled)return ae(t.saveParseBlock("parseThumbnailBlock"))}),(function(){return t.createOutput()}))}))}))}))}))}catch(t){return Promise.reject(t)}}},{key:"saveParseBlock",value:function(t){try{var e=this;return function(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}((function(){return(n=e[t]())&&n.then||(n=Promise.resolve(n)),n;var n}),(function(t){e.handleError(t)}))}catch(t){return Promise.reject(t)}}},{key:"findIfd0Offset",value:function(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(void 0===this.ifd1Offset){this.findIfd0Offset();var t=this.chunk.getUint16(this.ifd0Offset);this.ifd1Offset=this.chunk.getUint32(this.ifd0Offset+2+12*t)}}},{key:"parseBlock",value:function(t,e){var n=k();return this[e]=n,this.parseTags(t,e,n),n}},{key:"parseIfd0Block",value:function(){try{var t=this;if(t.ifd0)return;if(t.findIfd0Offset(),t.ifd0Offset<8)throw T("Invalid EXIF data: IFD0 offset should be less than 8");if(!t.file.chunked&&t.ifd0Offset>t.file.byteLength)throw T("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(t.ifd0Offset,", file.byteLength: ").concat(t.file.byteLength));return oe((function(){if(t.file.isTiff)return ae(t.file.ensureChunk(t.ifd0Offset,M(t.options)))}),(function(){var e=t.parseBlock(t.ifd0Offset,"ifd0");if(0!==e.size)return t.exifOffset=e.get(34665),t.interopOffset=e.get(40965),t.gpsOffset=e.get(34853),t.xmp=e.get(700),t.iptc=e.get(33723),t.icc=e.get(34675),t.options.sanitize&&(e.delete(34665),e.delete(40965),e.delete(34853),e.delete(700),e.delete(33723),e.delete(34675)),e}))}catch(t){return Promise.reject(t)}}},{key:"ensureBlockChunk",value:function(t,e){try{var n=this;return oe((function(){if(n.file.isTiff)return ae(n.file.ensureChunk(t,e))}),(function(){t>n.chunk.byteLength&&(n.chunk=Q.from(n.file,n.le))}))}catch(t){return Promise.reject(t)}}},{key:"parseExifBlock",value:function(){try{var t=this;if(t.exif)return;return oe((function(){if(!t.ifd0)return ae(t.parseIfd0Block())}),(function(){if(void 0!==t.exifOffset)return oe((function(){if(t.file.isTiff)return ae(t.file.ensureChunk(t.exifOffset,M(t.options)))}),(function(){var e=t.parseBlock(t.exifOffset,"exif");return t.interopOffset||(t.interopOffset=e.get(40965)),t.makerNote=e.get(37500),t.userComment=e.get(37510),t.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),t.unpack(e,41728),t.unpack(e,41729),e}))}))}catch(t){return Promise.reject(t)}}},{key:"unpack",value:function(t,e){var n=t.get(e);n&&1===n.length&&t.set(e,n[0])}},{key:"parseGpsBlock",value:function(){try{var t=this;if(t.gps)return;return oe((function(){if(!t.ifd0)return ae(t.parseIfd0Block())}),(function(){if(void 0!==t.gpsOffset){var e=t.parseBlock(t.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",ce.apply(void 0,e.get(2).concat([e.get(1)]))),e.set("longitude",ce.apply(void 0,e.get(4).concat([e.get(3)])))),e}}))}catch(t){return Promise.reject(t)}}},{key:"parseInteropBlock",value:function(){try{var t=this;if(t.interop)return;return oe((function(){if(!t.ifd0)return ae(t.parseIfd0Block())}),(function(){return oe((function(){if(void 0===t.interopOffset&&!t.exif)return ae(t.parseExifBlock())}),(function(){if(void 0!==t.interopOffset)return t.parseBlock(t.interopOffset,"interop")}))}))}catch(t){return Promise.reject(t)}}},{key:"parseThumbnailBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var e=this;if(e.ifd1||e.ifd1Parsed)return;if(e.options.mergeOutput&&!t)return;return e.findIfd1Offset(),e.ifd1Offset>0&&(e.parseBlock(e.ifd1Offset,"ifd1"),e.ifd1Parsed=!0),e.ifd1}catch(t){return Promise.reject(t)}}},{key:"extractThumbnail",value:function(){try{var t=this;return t.headerParsed||t.parseHeader(),oe((function(){if(!t.ifd1Parsed)return ae(t.parseThumbnailBlock(!0))}),(function(){if(void 0!==t.ifd1){var e=t.ifd1.get(513),n=t.ifd1.get(514);return t.chunk.getUint8Array(e,n)}}))}catch(t){return Promise.reject(t)}}},{key:"createOutput",value:function(){var t,e,n,i={},r=ot;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var s=0;s<r.length;s++)if(!R(t=this[e=r[s]]))if(n=this.canTranslate?this.translateBlock(t,e):v(t),this.options.mergeOutput){if("ifd1"===e)continue;m(i,n)}else i[e]=n;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}},{key:"assignToOutput",value:function(t,e){if(this.globalOptions.mergeOutput)m(t,e);else{var n=g(e);Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var i=0;i<n.length;i++){var r=n[i];this.assignObjectToOutput(t,r[0],r[1])}}}},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}}],[{key:"canHandle",value:function(t,e){return 225===t.getUint8(e+1)&&1165519206===t.getUint32(e+4)&&0===t.getUint16(e+8)}}]),n}(function(t){function n(){return e(this,n),d(this,a(n).apply(this,arguments))}return s(n,t),i(n,[{key:"parseHeader",value:function(){var t=this.chunk.getUint16();if(18761===t)this.le=!0;else{if(19789!==t)throw T("Invalid EXIF data: expected byte order marker (0x4949 or 0x4D4D).");this.le=!1}if(this.chunk.le=this.le,42!==this.chunk.getUint16(2))throw T("Invalid EXIF data: expected 0x002A.");this.headerParsed=!0}},{key:"parseTags",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k(),i=this.options[e],r=i.pick,s=i.skip,a=(r=_(r)).size>0,o=0===s.size,l=this.chunk.getUint16(t);t+=2;for(var u=0;u<l;u++){var c=this.chunk.getUint16(t);if(a){if(r.has(c)&&(n.set(c,this.parseTag(t,c,e)),r.delete(c),0===r.size))break}else!o&&s.has(c)||n.set(c,this.parseTag(t,c,e));t+=12}return n}},{key:"parseTag",value:function(t,e,n){var i,r=this.chunk.getUint16(t+2),s=this.chunk.getUint32(t+4),a=le[r];if(a*s<=4?t+=8:t=this.chunk.getUint32(t+8),r<1||r>13)throw T("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(e.toString(16),", type: ").concat(r,", offset ").concat(t));if(t>this.chunk.byteLength)throw T("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(e.toString(16),", type: ").concat(r,", offset ").concat(t," is outside of chunk size ").concat(this.chunk.byteLength));if(1===r)return this.chunk.getUint8Array(t,s);if(2===r)return""===(i=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(i=this.chunk.getString(t,s)).trim())?void 0:i;if(7===r)return this.chunk.getUint8Array(t,s);if(1===s)return this.parseTagValue(r,t);for(var o=new(function(t){switch(t){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(r))(s),l=a,u=0;u<s;u++)o[u]=this.parseTagValue(r,t),t+=l;return o}},{key:"parseTagValue",value:function(t,e){switch(t){case 1:return this.chunk.getUint8(e);case 3:return this.chunk.getUint16(e);case 4:return this.chunk.getUint32(e);case 5:return this.chunk.getUint32(e)/this.chunk.getUint32(e+4);case 6:return this.chunk.getInt8(e);case 8:return this.chunk.getInt16(e);case 9:return this.chunk.getInt32(e);case 10:return this.chunk.getInt32(e)/this.chunk.getInt32(e+4);case 11:return this.chunk.getFloat(e);case 12:return this.chunk.getDouble(e);case 13:return this.chunk.getUint32(e);default:throw T("Invalid tiff type ".concat(t))}}}]),n}(Ht));function ce(t,e,n,i){var r=t+e/60+n/3600;return"S"!==i&&"W"!==i||(r*=-1),r}r(ue,"type","tiff"),r(ue,"headerLength",10),z.set("tiff",ue),t.Exifr=Dt,t.Options=mt,t.allFormatters=ht,t.chunkedProps=rt,t.createDictionary=J,t.default=Mt,t.disableAllOptions=yt,t.extendDictionary=tt,t.fetchUrlAsArrayBuffer=$,t.fileParsers=V,t.fileReaders=L,t.gps=St,t.gpsOnlyOptions=wt,t.inheritables=ct,t.orientation=Bt,t.orientationOnlyOptions=_t,t.otherSegments=st,t.parse=Tt,t.readBlobAsArrayBuffer=G,t.segmentParsers=z,t.segments=at,t.segmentsAndBlocks=lt,t.tagKeys=et,t.tagRevivers=it,t.tagValues=nt,t.thumbnail=Rt,t.thumbnailOnlyOptions=kt,t.thumbnailUrl=jt,t.tiffBlocks=ot,t.tiffExtractables=ut,Object.defineProperty(t,"__esModule",{value:!0})}(e)},gkvR:function(t,e,n){t.exports=function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return r(e[a][1][t]||t)}),u,u.exports,t,e,n,i)}return n[a].exports}for(var s=!1,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";var i=t("inherits"),r=t("multimath"),s=t("./mm_unsharp_mask"),a=t("./mm_resize");function o(t){var e=t||[],n={js:e.indexOf("js")>=0,wasm:e.indexOf("wasm")>=0};r.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm()},this.use(s),this.use(a)}i(o,r),o.prototype.resizeAndUnsharp=function(t,e){var n=this.resize(t,e);return t.unsharpAmount&&this.unsharp_mask(n,t.toWidth,t.toHeight,t.unsharpAmount,t.unsharpRadius,t.unsharpThreshold),n},e.exports=o},{"./mm_resize":4,"./mm_unsharp_mask":9,inherits:19,multimath:20}],2:[function(t,e,n){"use strict";function i(t){return t<0?0:t>255?255:t}e.exports={convolveHorizontally:function(t,e,n,r,s,a){var o,l,u,c,h,d,f,p,g,m,v,A=0,b=0;for(g=0;g<r;g++){for(h=0,m=0;m<s;m++){for(d=a[h++],f=a[h++],p=A+4*d|0,o=l=u=c=0;f>0;f--)c=c+(v=a[h++])*t[p+3]|0,u=u+v*t[p+2]|0,l=l+v*t[p+1]|0,o=o+v*t[p]|0,p=p+4|0;e[b+3]=i(c+8192>>14),e[b+2]=i(u+8192>>14),e[b+1]=i(l+8192>>14),e[b]=i(o+8192>>14),b=b+4*r|0}b=4*(g+1)|0,A=(g+1)*n*4|0}},convolveVertically:function(t,e,n,r,s,a){var o,l,u,c,h,d,f,p,g,m,v,A=0,b=0;for(g=0;g<r;g++){for(h=0,m=0;m<s;m++){for(d=a[h++],f=a[h++],p=A+4*d|0,o=l=u=c=0;f>0;f--)c=c+(v=a[h++])*t[p+3]|0,u=u+v*t[p+2]|0,l=l+v*t[p+1]|0,o=o+v*t[p]|0,p=p+4|0;e[b+3]=i(c+8192>>14),e[b+2]=i(u+8192>>14),e[b+1]=i(l+8192>>14),e[b]=i(o+8192>>14),b=b+4*r|0}b=4*(g+1)|0,A=(g+1)*n*4|0}}}},{}],3:[function(t,e,n){"use strict";e.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEXA2AAAGAGf39/f39/AGAHf39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMEAwABAgYGAX8AQQALB1cFEV9fd2FzbV9jYWxsX2N0b3JzAAAIY29udm9sdmUAAQpjb252b2x2ZUhWAAIMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAK7AMDAwABC8YDAQ9/AkAgA0UNACAERQ0AA0AgDCENQQAhE0EAIQcDQCAHQQJqIQYCfyAHQQF0IAVqIgcuAQIiFEUEQEGAwAAhCEGAwAAhCUGAwAAhCkGAwAAhCyAGDAELIBIgBy4BAGohCEEAIQsgFCEHQQAhDiAGIQlBACEPQQAhEANAIAUgCUEBdGouAQAiESAAIAhBAnRqKAIAIgpBGHZsIBBqIRAgCkH/AXEgEWwgC2ohCyAKQRB2Qf8BcSARbCAPaiEPIApBCHZB/wFxIBFsIA5qIQ4gCEEBaiEIIAlBAWohCSAHQQFrIgcNAAsgC0GAQGshCCAOQYBAayEJIA9BgEBrIQogEEGAQGshCyAGIBRqCyEHIAEgDUECdGogCUEOdSIGQf8BIAZB/wFIGyIGQQAgBkEAShtBCHRBgP4DcSAKQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EQdEGAgPwHcSALQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobcjYCACADIA1qIQ0gE0EBaiITIARHDQALIAxBAWoiDCACbCESIAMgDEcNAAsLCx4AQQAgAiADIAQgBSAAEAEgAkEAIAQgBSAGIAEQAQs="},{}],4:[function(t,e,n){"use strict";e.exports={name:"resize",fn:t("./resize"),wasm_fn:t("./resize_wasm"),wasm_src:t("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(t,e,n){"use strict";var i=t("./resize_filter_gen"),r=t("./convolve").convolveHorizontally,s=t("./convolve").convolveVertically;e.exports=function(t){var e=t.src,n=t.width,a=t.height,o=t.toWidth,l=t.toHeight,u=t.scaleX||t.toWidth/t.width,c=t.scaleY||t.toHeight/t.height,h=t.offsetX||0,d=t.offsetY||0,f=t.dest||new Uint8Array(o*l*4),p=void 0===t.quality?3:t.quality,g=t.alpha||!1,m=i(p,n,o,u,h),v=i(p,a,l,c,d),A=new Uint8Array(o*a*4);return r(e,A,n,a,o,m),s(A,f,a,o,l,v),g||function(t,e,n){for(var i=3,r=e*n*4|0;i<r;)t[i]=255,i=i+4|0}(f,o,l),f}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(t,e,n){"use strict";var i=t("./resize_filter_info");function r(t){return Math.round(16383*t)}e.exports=function(t,e,n,s,a){var o,l,u,c,h,d,f,p,g,m,v,A,b,y,w,_,k=i[t].filter,I=1/s,C=Math.min(1,s),x=i[t].win/C,D=Math.floor(2*(x+1)),O=new Int16Array((D+2)*n),E=0,B=!O.subarray||!O.set;for(o=0;o<n;o++){for(l=(o+.5)*I+a,u=Math.max(0,Math.floor(l-x)),h=(c=Math.min(e-1,Math.ceil(l+x)))-u+1,d=new Float32Array(h),f=new Int16Array(h),p=0,g=u,m=0;g<=c;g++,m++)p+=v=k((g+.5-l)*C),d[m]=v;for(A=0,m=0;m<d.length;m++)A+=b=d[m]/p,f[m]=r(b);for(f[n>>1]+=r(1-A),y=0;y<f.length&&0===f[y];)y++;if(y<f.length){for(w=f.length-1;w>0&&0===f[w];)w--;if(_=w-y+1,O[E++]=u+y,O[E++]=_,B)for(m=y;m<=w;m++)O[E++]=f[m];else O.set(f.subarray(y,w+1),E),E+=_}else O[E++]=0,O[E++]=0}return O}},{"./resize_filter_info":7}],7:[function(t,e,n){"use strict";e.exports=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}]},{}],8:[function(t,e,n){"use strict";var i=t("./resize_filter_gen"),r=!0;try{r=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(a){}function s(t,e,n){if(r)e.set(function(t){return new Uint8Array(t.buffer,0,t.byteLength)}(t),n);else for(var i=n,s=0;s<t.length;s++){var a=t[s];e[i++]=255&a,e[i++]=a>>8&255}}e.exports=function(t){var e=t.src,n=t.width,r=t.height,a=t.toWidth,o=t.toHeight,l=t.scaleX||t.toWidth/t.width,u=t.scaleY||t.toHeight/t.height,c=t.offsetX||0,h=t.offsetY||0,d=t.dest||new Uint8Array(a*o*4),f=void 0===t.quality?3:t.quality,p=t.alpha||!1,g=i(f,n,a,l,c),m=i(f,r,o,u,h),v=this.__align(0+Math.max(e.byteLength,d.byteLength)),A=this.__align(v+r*a*4),b=this.__align(A+g.byteLength),y=this.__instance("resize",b+m.byteLength),w=new Uint8Array(this.__memory.buffer),_=new Uint32Array(this.__memory.buffer),k=new Uint32Array(e.buffer);return _.set(k),s(g,w,A),s(m,w,b),(y.exports.convolveHV||y.exports._convolveHV)(A,b,v,n,r,a,o),new Uint32Array(d.buffer).set(new Uint32Array(this.__memory.buffer,0,o*a)),p||function(t,e,n){for(var i=3,r=e*n*4|0;i<r;)t[i]=255,i=i+4|0}(d,a,o),d}},{"./resize_filter_gen":6}],9:[function(t,e,n){"use strict";e.exports={name:"unsharp_mask",fn:t("./unsharp_mask"),wasm_fn:t("./unsharp_mask_wasm"),wasm_src:t("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(t,e,n){"use strict";var i=t("glur/mono16");e.exports=function(t,e,n,r,s,a){var o,l,u,c,h;if(!(0===r||s<.5)){s>2&&(s=2);var d=function(t,e,n){for(var i,r,s,a=e*n,o=new Uint16Array(a),l=0;l<a;l++)s=t[4*l+2],o[l]=((i=t[4*l])>=(r=t[4*l+1])&&i>=s?i:r>=s&&r>=i?r:s)<<8;return o}(t,e,n),f=new Uint16Array(d);i(f,e,n,s);for(var p=r/100*4096+.5|0,g=a<<8,m=e*n,v=0;v<m;v++)c=(o=d[v])-f[v],Math.abs(c)>=g&&(t[h=4*v]=t[h]*(u=((l=(l=(l=o+(p*c+2048>>12))>65280?65280:l)<0?0:l)<<12)/(o=0!==o?o:1)|0)+2048>>12,t[h+1]=t[h+1]*u+2048>>12,t[h+2]=t[h+2]*u+2048>>12)}}},{"glur/mono16":18}],11:[function(t,e,n){"use strict";e.exports=function(t,e,n,i,r,s){if(!(0===i||r<.5)){r>2&&(r=2);var a=e*n,o=4*a,l=2*a,u=2*a,c=4*Math.max(e,n),h=o,d=h+l,f=d+u,p=f+u,g=p+c,m=this.__instance("unsharp_mask",o+l+2*u+c+32,{exp:Math.exp}),v=new Uint32Array(t.buffer);new Uint32Array(this.__memory.buffer).set(v);var A=m.exports.hsv_v16||m.exports._hsv_v16;A(0,h,e,n),(A=m.exports.blurMono16||m.exports._blurMono16)(h,d,f,p,g,e,n,r),(A=m.exports.unsharp||m.exports._unsharp)(0,0,h,d,e,n,i,s),v.set(new Uint32Array(this.__memory.buffer,0,a))}}},{}],12:[function(t,e,n){"use strict";e.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(t,e,n){"use strict";function i(t,e){this.create=t,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=e||2e3}i.prototype.acquire=function(){var t,e=this;return 0!==this.available.length?t=this.available.pop():((t=this.create()).id=this.lastId++,t.release=function(){return e.release(t)}),this.acquired[t.id]=t,t},i.prototype.release=function(t){var e=this;delete this.acquired[t.id],t.lastUsed=Date.now(),this.available.push(t),0===this.timeoutId&&(this.timeoutId=setTimeout((function(){return e.gc()}),100))},i.prototype.gc=function(){var t=this,e=Date.now();this.available=this.available.filter((function(n){return!(e-n.lastUsed>t.idle&&(n.destroy(),1))})),this.timeoutId=0!==this.available.length?setTimeout((function(){return t.gc()}),100):0},e.exports=i},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e,n,i,r,s){var a=(2*s+2+1)/r;if(a>.5)return[[n,i]];var o=Math.ceil(Math.log(Math.min(n/t,i/e))/Math.log(a));if(o<=1)return[[n,i]];for(var l=[],u=0;u<o;u++){var c=Math.round(Math.pow(Math.pow(t,o-u-1)*Math.pow(n,u+1),1/o)),h=Math.round(Math.pow(Math.pow(e,o-u-1)*Math.pow(i,u+1),1/o));l.push([c,h])}return l}},{}],15:[function(t,e,n){"use strict";function i(t){var e=Math.round(t);return Math.abs(t-e)<1e-5?e:Math.floor(t)}function r(t){var e=Math.round(t);return Math.abs(t-e)<1e-5?e:Math.ceil(t)}e.exports=function(t){var e,n,s,a,o,l,u=t.toWidth/t.width,c=t.toHeight/t.height,h=i(t.srcTileSize*u)-2*t.destTileBorder,d=i(t.srcTileSize*c)-2*t.destTileBorder;if(h<1||d<1)throw new Error("Internal error in pica: target tile width/height is too small.");var f,p=[];for(a=0;a<t.toHeight;a+=d)for(s=0;s<t.toWidth;s+=h)(e=s-t.destTileBorder)<0&&(e=0),e+(o=s+h+t.destTileBorder-e)>=t.toWidth&&(o=t.toWidth-e),(n=a-t.destTileBorder)<0&&(n=0),n+(l=a+d+t.destTileBorder-n)>=t.toHeight&&(l=t.toHeight-n),f={toX:e,toY:n,toWidth:o,toHeight:l,toInnerX:s,toInnerY:a,toInnerWidth:h,toInnerHeight:d,offsetX:e/u-i(e/u),offsetY:n/c-i(n/c),scaleX:u,scaleY:c,x:i(e/u),y:i(n/c),width:r(o/u),height:r(l/c)},p.push(f);return p}},{}],16:[function(t,e,n){"use strict";function i(t){return Object.prototype.toString.call(t)}e.exports.isCanvas=function(t){var e=i(t);return"[object HTMLCanvasElement]"===e||"[object OffscreenCanvas]"===e||"[object Canvas]"===e},e.exports.isImage=function(t){return"[object HTMLImageElement]"===i(t)},e.exports.isImageBitmap=function(t){return"[object ImageBitmap]"===i(t)},e.exports.limiter=function(t){var e=0,n=[];function i(){e<t&&n.length&&(e++,n.shift()())}return function(t){return new Promise((function(r,s){n.push((function(){t().then((function(t){r(t),e--,i()}),(function(t){s(t),e--,i()}))})),i()}))}},e.exports.cib_quality_name=function(t){switch(t){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},e.exports.cib_support=function(t){return Promise.resolve().then((function(){if("undefined"==typeof createImageBitmap)return!1;var e=t(100,100);return createImageBitmap(e,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then((function(t){var n=10===t.width;return t.close(),e=null,n}))})).catch((function(){return!1}))},e.exports.worker_offscreen_canvas_support=function(){return new Promise((function(t,e){if("undefined"!=typeof OffscreenCanvas){var n=btoa("(".concat((function(t){"undefined"!=typeof createImageBitmap?Promise.resolve().then((function(){var t=new OffscreenCanvas(10,10);return t.getContext("2d").rect(0,0,1,1),createImageBitmap(t,0,0,1,1)})).then((function(){return t.postMessage(!0)}),(function(){return t.postMessage(!1)})):t.postMessage(!1)}).toString(),")(self);")),i=new Worker("data:text/javascript;base64,".concat(n));i.onmessage=function(e){return t(e.data)},i.onerror=e}else t(!1)})).then((function(t){return t}),(function(){return!1}))},e.exports.can_use_canvas=function(t){var e=!1;try{var n=t(2,1).getContext("2d"),i=n.createImageData(2,1);i.data[0]=12,i.data[1]=23,i.data[2]=34,i.data[3]=255,i.data[4]=45,i.data[5]=56,i.data[6]=67,i.data[7]=255,n.putImageData(i,0,0),i=null,12===(i=n.getImageData(0,0,2,1)).data[0]&&23===i.data[1]&&34===i.data[2]&&255===i.data[3]&&45===i.data[4]&&56===i.data[5]&&67===i.data[6]&&255===i.data[7]&&(e=!0)}catch(r){}return e},e.exports.cib_can_use_region=function(){return new Promise((function(t){if("undefined"!=typeof createImageBitmap){var e=new Image;e.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",e.onload=function(){createImageBitmap(e,0,0,e.width,e.height).then((function(n){t(n.width===e.width&&n.height===e.height)}),(function(){return t(!1)}))},e.onerror=function(){return t(!1)}}else t(!1)}))}},{}],17:[function(t,e,n){"use strict";e.exports=function(){var e,n=t("./mathlib");onmessage=function(t){var i=t.data.opts,r=!1;if(!i.src&&i.srcBitmap){var s=new OffscreenCanvas(i.width,i.height),a=s.getContext("2d",{alpha:Boolean(i.alpha)});a.drawImage(i.srcBitmap,0,0),i.src=a.getImageData(0,0,i.width,i.height).data,s.width=s.height=0,s=null,i.srcBitmap.close(),i.srcBitmap=null,r=!0}e||(e=new n(t.data.features));var o=e.resizeAndUnsharp(i);if(r){var l=new ImageData(new Uint8ClampedArray(o),i.toWidth,i.toHeight),u=new OffscreenCanvas(i.toWidth,i.toHeight);u.getContext("2d",{alpha:Boolean(i.alpha)}).putImageData(l,0,0),createImageBitmap(u).then((function(t){postMessage({bitmap:t},[t])}))}else postMessage({data:o},[o.buffer])}}},{"./mathlib":1}],18:[function(t,e,n){var i,r,s,a,o,l;function u(t,e,n,i,r,s){var a,o,l,u,c,h,d,f,p,g,m,v,A,b;for(p=0;p<s;p++){for(d=p,f=0,u=c=(a=t[h=p*r])*i[6],m=i[0],v=i[1],A=i[4],b=i[5],g=0;g<r;g++)l=(o=t[h])*m+a*v+u*A+c*b,c=u,a=o,n[f]=u=l,f++,h++;for(f--,d+=s*(r-1),u=c=(a=t[--h])*i[7],o=a,m=i[2],v=i[3],g=r-1;g>=0;g--)l=o*m+a*v+u*A+c*b,c=u,a=o,o=t[h],e[d]=n[f]+(u=l),h--,f--,d-=s}}e.exports=function(t,e,n,c){if(c){var h=new Uint16Array(t.length),d=new Float32Array(Math.max(e,n)),f=function(t){t<.5&&(t=.5);var e=Math.exp(.527076)/t,n=Math.exp(-e),u=Math.exp(-2*e),c=(1-n)*(1-n)/(1+2*e*n-u);return i=c,r=c*(e-1)*n,s=c*(e+1)*n,a=-c*u,o=2*n,l=-u,new Float32Array([i,r,s,a,o,l,(i+r)/(1-o-l),(s+a)/(1-o-l)])}(c);u(t,h,d,f,e,n),u(h,t,d,f,n,e)}}},{}],19:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],20:[function(t,e,n){"use strict";var i=t("object-assign"),r=t("./lib/base64decode"),s=t("./lib/wa_detect"),a={js:!0,wasm:!0};function o(t){if(!(this instanceof o))return new o(t);var e=i({},a,t||{});if(this.options=e,this.__cache={},this.__init_promise=null,this.__modules=e.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}o.prototype.has_wasm=s,o.prototype.use=function(t){return this.__modules[t.name]=t,this[t.name]=this.options.wasm&&this.has_wasm()&&t.wasm_fn?t.wasm_fn:t.fn,this},o.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var t=this;return this.__init_promise=Promise.all(Object.keys(t.__modules).map((function(e){var n=t.__modules[e];return t.options.wasm&&t.has_wasm()&&n.wasm_fn?t.__wasm[e]?null:WebAssembly.compile(t.__base64decode(n.wasm_src)).then((function(n){t.__wasm[e]=n})):null}))).then((function(){return t})),this.__init_promise},o.prototype.__base64decode=r,o.prototype.__reallocate=function(t){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(t/65536)}),this.__memory;var e=this.__memory.buffer.byteLength;return e<t&&this.__memory.grow(Math.ceil((t-e)/65536)),this.__memory},o.prototype.__instance=function(t,e,n){if(e&&this.__reallocate(e),this.__wasm[t]||(this.__wasm[t]=new WebAssembly.Module(this.__base64decode(this.__modules[t].wasm_src))),!this.__cache[t]){var r={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[t]=new WebAssembly.Instance(this.__wasm[t],{env:i(r,n||{})})}return this.__cache[t]},o.prototype.__align=function(t,e){var n=t%(e=e||8);return t+(n?e-n:0)},e.exports=o},{"./lib/base64decode":21,"./lib/wa_detect":22,"object-assign":23}],21:[function(t,e,n){"use strict";e.exports=function(t){for(var e=t.replace(/[\r\n=]/g,""),n=e.length,i=new Uint8Array(3*n>>2),r=0,s=0,a=0;a<n;a++)a%4==0&&a&&(i[s++]=r>>16&255,i[s++]=r>>8&255,i[s++]=255&r),r=r<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(a));var o=n%4*6;return 0===o?(i[s++]=r>>16&255,i[s++]=r>>8&255,i[s++]=255&r):18===o?(i[s++]=r>>10&255,i[s++]=r>>2&255):12===o&&(i[s++]=r>>4&255),i}},{}],22:[function(t,e,n){"use strict";var i;e.exports=function(){if(void 0!==i)return i;if(i=!1,"undefined"==typeof WebAssembly)return i;try{var t=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),e=new WebAssembly.Module(t);return 0!==new WebAssembly.Instance(e,{}).exports.test(4)&&(i=!0),i}catch(n){}return i}},{}],23:[function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var n,o,l=a(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))r.call(n,c)&&(l[c]=n[c]);if(i){o=i(n);for(var h=0;h<o.length;h++)s.call(n,o[h])&&(l[o[h]]=n[o[h]])}}return l}},{}],24:[function(t,e,n){var i=arguments[3],r=arguments[4],s=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var n,o=Object.keys(s),l=0,u=o.length;l<u;l++){var c=s[d=o[l]].exports;if(c===t||c&&c.default===t){n=d;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var h={};for(l=0,u=o.length;l<u;l++){var d;h[d=o[l]]=d}r[n]=["function(require,module,exports){"+t+"(self); }",h]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[n]=n,r[f]=["function(require,module,exports){var f = require("+a(n)+");(f.default ? f.default : f)(self);}",p];var g={};!function t(e){for(var n in g[e]=!0,r[e][1]){var i=r[e][1][n];g[i]||t(i)}}(f);var m="("+i+")({"+Object.keys(g).map((function(t){return a(t)+":["+r[t][0]+","+a(r[t][1])+"]"})).join(",")+"},{},["+a(f)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,A=new Blob([m],{type:"text/javascript"});if(e&&e.bare)return A;var b=v.createObjectURL(A),y=new Worker(b);return y.objectURL=b,y}},{}],"/index.js":[function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var r=t("object-assign"),s=t("webworkify"),a=t("./lib/mathlib"),o=t("./lib/pool"),l=t("./lib/utils"),u=t("./lib/worker"),c=t("./lib/stepper"),h=t("./lib/tiler"),d={},f=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(f=navigator.userAgent.indexOf("Safari")>=0)}catch(I){}var p=1;"undefined"!=typeof navigator&&(p=Math.min(navigator.hardwareConcurrency||1,4));var g={tile:1024,concurrency:p,features:["js","wasm","ww"],idle:2e3,createCanvas:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}},m={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},v=!1,A=!1,b=!1,y=!1,w=!1;function _(){return{value:s(u),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;t&&t.revokeObjectURL&&this.value.objectURL&&t.revokeObjectURL(this.value.objectURL)}}}}function k(t){if(!(this instanceof k))return new k(t);this.options=r({},g,t||{});var e="lk_".concat(this.options.concurrency);this.__limit=d[e]||l.limiter(this.options.concurrency),d[e]||(d[e]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}k.prototype.init=function(){var e=this;if(this.__initPromise)return this.__initPromise;if("undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray)try{new ImageData(new Uint8ClampedArray(400),10,10),v=!0}catch(f){}"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?A=!0:this.debug("ImageBitmap does not support .close(), disabled"));var n=this.options.features.slice();if(n.indexOf("all")>=0&&(n=["cib","wasm","js","ww"]),this.__requested_features=n,this.__mathlib=new a(n),n.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{t("webworkify")((function(){})).terminate(),this.features.ww=!0;var i="wp_".concat(JSON.stringify(this.options));d[i]?this.__workersPool=d[i]:(this.__workersPool=new o(_,this.options.idle),d[i]=this.__workersPool)}catch(f){}var s,u,c=this.__mathlib.init().then((function(t){r(e.features,t.features)}));s=A?l.cib_support(this.options.createCanvas).then((function(t){e.features.cib&&n.indexOf("cib")<0?e.debug("createImageBitmap() resize supported, but disabled by config"):n.indexOf("cib")>=0&&(e.features.cib=t)})):Promise.resolve(!1),b=l.can_use_canvas(this.options.createCanvas),u=(u=A&&v&&-1!==n.indexOf("ww")?l.worker_offscreen_canvas_support():Promise.resolve(!1)).then((function(t){y=t}));var h=l.cib_can_use_region().then((function(t){w=t}));return this.__initPromise=Promise.all([c,s,u,h]).then((function(){return e})),this.__initPromise},k.prototype.__invokeResize=function(t,e){var n=this;return e.__mathCache=e.__mathCache||{},Promise.resolve().then((function(){return n.features.ww?new Promise((function(i,r){var s=n.__workersPool.acquire();e.cancelToken&&e.cancelToken.catch((function(t){return r(t)})),s.value.onmessage=function(t){s.release(),t.data.err?r(t.data.err):i(t.data)};var a=[];t.src&&a.push(t.src.buffer),t.srcBitmap&&a.push(t.srcBitmap),s.value.postMessage({opts:t,features:n.__requested_features,preload:{wasm_nodule:n.__mathlib.__}},a)})):{data:n.__mathlib.resizeAndUnsharp(t,e.__mathCache)}}))},k.prototype.__extractTileData=function(t,e,n,i,r){if(this.features.ww&&y&&(l.isCanvas(e)||w))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(i.srcImageBitmap||e,t.x,t.y,t.width,t.height).then((function(t){return r.srcBitmap=t,r}));if(l.isCanvas(e))return i.srcCtx||(i.srcCtx=e.getContext("2d",{alpha:Boolean(n.alpha)})),this.debug("Get tile pixel data"),r.src=i.srcCtx.getImageData(t.x,t.y,t.width,t.height).data,r;this.debug("Draw tile imageBitmap/image to temporary canvas");var s=this.options.createCanvas(t.width,t.height),a=s.getContext("2d",{alpha:Boolean(n.alpha)});return a.globalCompositeOperation="copy",a.drawImage(i.srcImageBitmap||e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),this.debug("Get tile pixel data"),r.src=a.getImageData(0,0,t.width,t.height).data,s.width=s.height=0,r},k.prototype.__landTileData=function(t,e,n){var i;if(this.debug("Convert raw rgba tile result to ImageData"),e.bitmap)return n.toCtx.drawImage(e.bitmap,t.toX,t.toY),null;if(v)i=new ImageData(new Uint8ClampedArray(e.data),t.toWidth,t.toHeight);else if((i=n.toCtx.createImageData(t.toWidth,t.toHeight)).data.set)i.data.set(e.data);else for(var r=i.data.length-1;r>=0;r--)i.data[r]=e.data[r];return this.debug("Draw tile"),f?n.toCtx.putImageData(i,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):n.toCtx.putImageData(i,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),null},k.prototype.__tileAndResize=function(t,e,n){var i=this,r={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null};return Promise.resolve().then((function(){if(r.toCtx=e.getContext("2d",{alpha:Boolean(n.alpha)}),l.isCanvas(t))return null;if(l.isImageBitmap(t))return r.srcImageBitmap=t,r.isImageBitmapReused=!0,null;if(l.isImage(t))return A?(i.debug("Decode image via createImageBitmap"),createImageBitmap(t).then((function(t){r.srcImageBitmap=t})).catch((function(t){return null}))):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')})).then((function(){if(n.canceled)return n.cancelToken;i.debug("Calculate tiles");var s=h({width:n.width,height:n.height,srcTileSize:i.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:n.__destTileBorder}).map((function(e){return function(e){return i.__limit((function(){if(n.canceled)return n.cancelToken;var s={width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return i.debug("Invoke resize math"),Promise.resolve(s).then((function(s){return i.__extractTileData(e,t,n,r,s)})).then((function(t){return i.debug("Invoke resize math"),i.__invokeResize(t,n)})).then((function(t){return n.canceled?n.cancelToken:(r.srcImageData=null,i.__landTileData(e,t,r))}))}))}(e)}));function a(t){t.srcImageBitmap&&(t.isImageBitmapReused||t.srcImageBitmap.close(),t.srcImageBitmap=null)}return i.debug("Process tiles"),Promise.all(s).then((function(){return i.debug("Finished!"),a(r),e}),(function(t){throw a(r),t}))}))},k.prototype.__processStages=function(t,e,n,s){var a=this;if(s.canceled)return s.cancelToken;var o,l,u=(2,function(t){if(Array.isArray(t))return t}(l=t.shift())||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(s.push(i.value),2!==s.length);a=!0);}catch(l){o=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(l)||function(t,e){if(t){if("string"==typeof t)return i(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,2):void 0}}(l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],h=u[1],d=0===t.length;return s=r({},s,{toWidth:c,toHeight:h,quality:d?s.quality:Math.min(1,s.quality)}),d||(o=this.options.createCanvas(c,h)),this.__tileAndResize(e,d?n:o,s).then((function(){return d?n:(s.width=c,s.height=h,a.__processStages(t,o,n,s))})).then((function(t){return o&&(o.width=o.height=0),t}))},k.prototype.__resizeViaCreateImageBitmap=function(t,e,n){var i=this,r=e.getContext("2d",{alpha:Boolean(n.alpha)});return this.debug("Resize via createImageBitmap()"),createImageBitmap(t,{resizeWidth:n.toWidth,resizeHeight:n.toHeight,resizeQuality:l.cib_quality_name(n.quality)}).then((function(t){if(n.canceled)return n.cancelToken;if(!n.unsharpAmount)return r.drawImage(t,0,0),t.close(),r=null,i.debug("Finished!"),e;i.debug("Unsharp result");var s=i.options.createCanvas(n.toWidth,n.toHeight),a=s.getContext("2d",{alpha:Boolean(n.alpha)});a.drawImage(t,0,0),t.close();var o=a.getImageData(0,0,n.toWidth,n.toHeight);return i.__mathlib.unsharp_mask(o.data,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),r.putImageData(o,0,0),s.width=s.height=0,o=a=s=r=null,i.debug("Finished!"),e}))},k.prototype.resize=function(t,e,n){var i=this;this.debug("Start resize...");var s=r({},m);return isNaN(n)?n&&(s=r(s,n)):s=r(s,{quality:n}),s.toWidth=e.width,s.toHeight=e.height,s.width=t.naturalWidth||t.width,s.height=t.naturalHeight||t.height,0===e.width||0===e.height?Promise.reject(new Error("Invalid output size: ".concat(e.width,"x").concat(e.height))):(s.unsharpRadius>2&&(s.unsharpRadius=2),s.canceled=!1,s.cancelToken&&(s.cancelToken=s.cancelToken.then((function(t){throw s.canceled=!0,t}),(function(t){throw s.canceled=!0,t}))),s.__destTileBorder=Math.ceil(Math.max(3,2.5*s.unsharpRadius|0)),this.init().then((function(){if(s.canceled)return s.cancelToken;if(i.features.cib)return i.__resizeViaCreateImageBitmap(t,e,s);if(!b){var n=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw n.code="ERR_GET_IMAGE_DATA",n}var r=c(s.width,s.height,s.toWidth,s.toHeight,i.options.tile,s.__destTileBorder);return i.__processStages(r,t,e,s)})))},k.prototype.resizeBuffer=function(t){var e=this,n=r({},m,t);return this.init().then((function(){return e.__mathlib.resizeAndUnsharp(n)}))},k.prototype.toBlob=function(t,e,n){return e=e||"image/png",new Promise((function(i){if(t.toBlob)t.toBlob((function(t){return i(t)}),e,n);else if(t.convertToBlob)i(t.convertToBlob({type:e,quality:n}));else{for(var r=atob(t.toDataURL(e,n).split(",")[1]),s=r.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=r.charCodeAt(o);i(new Blob([a],{type:e}))}}))},k.prototype.debug=function(){},e.exports=k},{"./lib/mathlib":1,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":23,webworkify:24}]},{},[])("/index.js")},meT2:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("dFej"),r=function(){function t(){}return t.prototype.getOrientedImage=function(t){return new Promise((function(e){var n;i.orientation(t).catch((function(t){})).then((function(i){if(1!=i){var r=document.createElement("canvas"),s=r.getContext("2d"),a=t.width,o=t.height,l=0,u=0,c=0;switch(i){case 3:case 4:l=-t.width,u=-t.height,c=180;break;case 5:case 6:a=t.height,o=t.width,u=-t.height,c=90;break;case 7:case 8:a=t.height,o=t.width,l=-t.width,c=270}r.width=a,r.height=o,[2,4,5,7].indexOf(i)>-1&&(s.translate(a,0),s.scale(-1,1)),s.rotate(c*Math.PI/180),s.drawImage(t,l,u),(n=document.createElement("img")).width=a,n.height=o,n.addEventListener("load",(function(){e(n)})),n.src=r.toDataURL("image/png")}else e(t)}))}))},t}()}}]);